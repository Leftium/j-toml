/*!@preserve@license
 * 模块名称：j-toml
 * 模块功能：龙腾道为汤小明语写的实现。从属于“简计划”。
   　　　　　An implementation of TOML written by LongTengDao. Belong to "Plan J".
 * 模块版本：1.28.0
 * 许可条款：LGPL-3.0
 * 所属作者：龙腾道 <LongTengDao@LongTengDao.com> (www.LongTengDao.com)
 * 问题反馈：https://GitHub.com/LongTengDao/j-toml/issues
 * 项目主页：https://GitHub.com/LongTengDao/j-toml/
 */
(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).TOML=t()})(this,(function(){"use strict";const e={if:Error}.if,t=TypeError,n=Object.assign,i=void 0,r=Function.prototype.bind,s=RegExp.prototype.test,l=RegExp.prototype.exec,a=SyntaxError,o=RegExp,c=Object.freeze,u=Reflect.apply,f=Proxy,h=Object.create,d=Object.seal?Object.preventExtensions(Object.create(null)):null,p="undefined"==typeof Symbol?i:Symbol.toStringTag,g=Object.defineProperty,b=Object,y=Array.isArray,w=1/0,m=Symbol.species,x=String.fromCharCode,T=Array,O=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var $={length:0},I=v.call.bind(v),S=b.hasOwn||function(){return O.bind?O.call.bind(O):function(e,t){return O.call(e,t)}}(),F=b.create;function k(e){var t=F(d);return S(e,"value")&&(t.value=e.value),S(e,"writable")&&(t.writable=e.writable),S(e,"get")&&(t.get=e.get),S(e,"set")&&(t.set=e.set),S(e,"enumerable")&&(t.enumerable=e.enumerable),S(e,"configurable")&&(t.configurable=e.configurable),t}const L=function(e,t){if(t||(t=e,e=h(d)),n)n(e,t);else for(var i in t)S(t,i)&&(e[i]=t[i]);if(e.default=e,p){var r=h(d);r.value="Module",g(e,p,r)}return"function"==typeof e&&e.prototype&&c(e.prototype),c(e)};var M=r?r.bind(s):function(e){return function(t){return s.call(e,t)}},U=r?r.bind(l):function(e){return function(t){return l.call(e,t)}};function A(e){var t=e.test=M(e),n=e.exec=U(e),i=t.source=n.source=e.source;return t.unicode=n.unicode=e.unicode,t.ignoreCase=n.ignoreCase=e.ignoreCase,t.multiline=n.multiline=i.indexOf("^")<0&&i.indexOf("$")<0?null:e.multiline,t.dotAll=n.dotAll=i.indexOf(".")<0?null:e.dotAll,e}function B(e){return A(e)}var D=/[\n\t]+/g,j=/\\./g;function C(e){return"\\`"===e?"`":e}var _="".includes?function(e,t){return e.includes(t)}:function(e,t){return e.indexOf(t)>-1};function E(e){for(var n=this.U,i=this.I,r=this.M,s=this.S,l=e.raw,c=l[0].replace(D,""),u=1,f=arguments.length;u!==f;){var h=arguments[u];if("string"==typeof h)c+=h;else{var d=h.source;if("string"!=typeof d)throw t("source");if(h.unicode===n)throw a("unicode");if(h.ignoreCase===i)throw a("ignoreCase");if(h.multiline===r&&(_(d,"^")||_(d,"$")))throw a("multiline");if(h.dotAll===s&&_(d,"."))throw a("dotAll");c+=d}c+=l[u++].replace(D,"")}var p=o(n?c=c.replace(j,C):c,this.flags),g=p.test=M(p),b=p.exec=U(p);return g.source=b.source=c,g.unicode=b.unicode=!n,g.ignoreCase=b.ignoreCase=!i,g.multiline=b.multiline=_(c,"^")||_(c,"$")?!r:null,g.dotAll=b.dotAll=_(c,".")?!s:null,p}var N=r&&r.bind(E);function P(e){return{U:!_(e,"u"),I:!_(e,"i"),M:!_(e,"m"),S:!_(e,"s"),flags:e}}var W=P(""),K=f?new f(E,{apply:function(e,t,n){return u(e,W,n)},get:function(e,t){return N(P(t))},defineProperty:function(){return!1},preventExtensions:function(){return!1}}):function(){E.apply=E.apply;for(var e=function(){return E.apply(W,arguments)},t=63;t--;)!function(t){e[t.flags]=function(){return E.apply(t,arguments)}}(P((1&t?"":"d")+(2&t?"":"g")+(4&t?"":"i")+(8&t?"":"m")+(8&t?"":"s")+(16&t?"":"u")+(32&t?"":"y")));return c?c(e):e}(),R="$_"in o?function(){var e=/^/;return e.test=e.test,function(t){return e.test(""),t}}():function(e){return e};const q=[];let H="",z=q,Y=-1,Z=-1;const J=e=>{throw e},V=/\r?\n/,G=(e,n)=>{if("string"!=typeof n)throw t("TOML.parse(,,,,sourcePath)");H=n,z=e.split(V),Y=z.length-1,Z=-1};class X{lineIndex=Z;type;restColumn;constructor(e,t){return this.type=e,this.restColumn=t,this}must(){return Z===Y&&J(a(`${this.type} is not close until the end of the file`+Q(", which started from ",this.lineIndex,z[this.lineIndex].length-this.restColumn+1))),z[++Z]}nowrap(){throw J(e("TOML.parse(,,multilineStringJoiner) must be passed, while the source including multi-line string"+Q(", which started from ",this.lineIndex,z[this.lineIndex].length-this.restColumn+1)))}}const Q=(e,t=Z,n=0)=>z===q?"":H?`\n    at (${H}:${t+1}:${n})`:`${e}line ${t+1}: ${z[t]}`,ee=()=>{H="",z=q},te=RangeError,ne=BigInt,ie=WeakMap,re=WeakMap.prototype.get,se=WeakMap.prototype.set,le=Number.isSafeInteger,ae=Object.getOwnPropertyNames,oe=WeakSet,ce=WeakSet.prototype.has,ue=WeakSet.prototype.add,fe=WeakSet.prototype.delete,he=Object.keys,de=Object.getOwnPropertySymbols,pe=function(){var e=Object.assign||function(e,t){var n,i,r;for(n=he(t),i=0;i<n.length;++i)e[r=n[i]]=t[r];if(de)for(n=de(t),i=0;i<n.length;++i)I(t,r=n[i])&&(e[r]=t[r]);return e};function t(e){return delete e.prototype.constructor,c(e.prototype),e}function n(n){return n===i?this:"function"==typeof n?t(n):e(F(d),n)}return delete n.name,n.prototype=null,c(n),n}(),ge=Object.is,be=Object.defineProperties,ye=Object.fromEntries,we=Reflect.construct,me=Reflect.defineProperty,xe=Reflect.deleteProperty,Te=Reflect.ownKeys,Oe=()=>{const e=new ie;return e.has=e.has,e.get=e.get,e.set=e.set,e},ve=Oe(),$e=Oe(),Ie=Oe(),Se=n(h(d),{defineProperty:(e,t,i)=>{if(S(e,t))return me(e,t,n(h(d),i));if(me(e,t,n(h(d),i))){const n=ve.get(e);return n[n.length]=t,!0}return!1},deleteProperty:(e,t)=>{if(xe(e,t)){const n=ve.get(e),i=n.indexOf(t);return i<0||--n.copyWithin(i,i+1).length,!0}return!1},ownKeys:e=>ve.get(e),construct:(e,t,n)=>ke(we(e,t,n)),apply:(e,t,n)=>ke(u(e,t,n))}),Fe=(e,t)=>{ve.set(e,t);const n=new f(e,Se);return $e.set(n,e),n},ke=e=>{if($e.has(e))return e;let t=Ie.get(e);return t||(t=Fe(e,n([],Te(e))),Ie.set(e,t),t)},Le=function(){function e(){throw t("Super constructor Null cannot be invoked with 'new'")}function i(){throw t("Super constructor Null cannot be invoked without 'new'")}const r=e=>(delete e.prototype.constructor,c(e.prototype),e);function s(t){return new.target?new.target===s?e():Fe(this,[]):"function"==typeof t?r(t):i()}return s.prototype=null,g(s,"name",n(h(d),{value:"",configurable:!1})),c(s),s}(),Me=WeakMap.prototype.has,Ue=WeakMap.prototype.delete,Ae=new ie,Be=new oe,De=Ue.bind(Ae),je=fe.bind(Be),Ce=Me.bind(Ae),_e=re.bind(Ae),Ee=se.bind(Ae),Ne=e=>(De(e),e),Pe=ce.bind(Be),We=ue.bind(Be),Ke=new oe,Re=ue.bind(Ke),qe=ce.bind(Ke),He=new oe,ze=ue.bind(He),Ye=fe.bind(He),Ze=!0,Je=!1,Ve=new oe,Ge=ue.bind(Ve),Xe=ce.bind(Ve),Qe=pe(class extends pe{constructor(e,t){return super(),Re(this),e?t?Ee(this,!0):We(this):(t?Ge:ze)(this),this}}),et=pe(class extends Le{constructor(e,t){return super(),Re(this),e?t?Ee(this,!0):We(this):(t?Ge:ze)(this),this}}),tt=/[ \t]/,nt=K`
	^${tt}+`.valueOf(),{exec:it}=K.s`
	^
	(
		(?:\d\d\d\d-\d\d-\d\d \d)?
		[\w\-+.:]+
	)
	${tt}*
	(.*)
	$`.valueOf(),{exec:rt}=K.s`
	^
	'([^']*)'
	${tt}*
	(.*)`.valueOf(),{exec:st}=K.s`
	^
	(.*?)
	'''('{0,2})
	${tt}*
	(.*)`.valueOf(),{exec:lt}=K.s`
	^
	(.*?)
	'''()
	${tt}*
	(.*)`.valueOf();let at=lt;const ot=K.s`
	^
	.
	${tt}*`.valueOf(),ct=/[^\x00-\x1F"#'()<>[\\\]`{}\x7F]+/,{exec:ut}=K.s`
	^
	${tt}*
	=
	${tt}*
	(?:
		<(${ct})>
		${tt}*
	)?
	(.*)
	$`.valueOf(),{exec:ft}=K.s`
	^
	<(${ct})>
	${tt}*
	(.*)
	$`.valueOf(),{exec:ht}=K.s`
	^
	<(${ct})>
	${tt}*
	(.*)
	$`.valueOf(),dt=B(/[^\\"]+|\\.?|"(?!"")"?/ys),pt=e=>{let t=0;for(;dt.test(e);)t=dt.lastIndex;return t},gt=/[^\\\x00-\x08\x0B-\x1F\x7F]+|\\(?:[btnfr"\\]|[\t ]*\n[\t\n ]*|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/g,bt=/[^\\\x00-\x09\x0B-\x1F\x7F]+|\\(?:[btnfr"\\]|[\t ]*\n[\t\n ]*|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/g,yt=/[^\\\x00-\x09\x0B-\x1F]+|\\(?:[btnfr"\\]|[\t ]*\n[\t\n ]*|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/g,wt=/[^\\\x00-\x09\x0B-\x1F]+|\\(?:[btnfr"\\/]|[\t ]*\n[\t\n ]*|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/g;let mt=gt;const xt=e=>!e.replace(mt,""),Tt=B(/[^\\"\x00-\x08\x0B-\x1F\x7F]+|\\(?:[btnfr"\\]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/y),Ot=B(/[^\\"\x00-\x08\x0B-\x1F\x7F]+|\\(?:[btnfr"\\]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/y),vt=B(/[^\\"\x00-\x08\x0B-\x1F]+|\\(?:[btnfr"\\]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/y),$t=B(/[^\\"\x00-\x08\x0B-\x1F]+|\\(?:[btnfr"\\/]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/y);let It=$t;const St=e=>{let t=It.lastIndex=1;for(;It.test(e);)t=It.lastIndex;return t!==e.length&&'"'===e[t]||J(a("Bad basic string"+Q(" at "))),t},{test:Ft}=B(/^[ \t]*\./),kt=/^[ \t]*\.[ \t]*/,{exec:Lt}=B(/^[\w-]+/),{exec:Mt}=B(/^[^ \t#=[\]'".]+(?:[ \t]+[^ \t#=[\]'".]+)*/);let Ut=Mt;const{exec:At}=B(/^'[^'\x00-\x08\x0B-\x1F\x7F]*'/),{exec:Bt}=B(/^'[^'\x00-\x08\x0B-\x1F]*'/);let Dt=Bt,jt=!0;const Ct=(e,t)=>{const n="["===e[1];n?(jt||J(a("Array of Tables is not allowed before TOML v0.2"+Q(", which at "))),e=e.slice(2)):e=e.slice(1),e=e.replace(nt,"");const{leadingKeys:i,finalKey:r}=({lineRest:e}=t(e));let s;return(e=e.replace(nt,""))&&"]"===e[0]||J(a("Table header is not closed"+Q(", which is found at "))),(e.length>1?"]"===e[1]===n:!n)||J(a("Square brackets of Table definition statement not match"+Q(" at "))),(e=e.slice(n?2:1).replace(nt,""))&&"<"===e[0]?({1:s,2:e}=ht(e)??J(a("Bad tag"+Q(" at ")))):s="",{leadingKeys:i,finalKey:r,asArrayItem:n,tag:s,lineRest:e}},{test:_t}=B(/[\x00-\x08\x0B-\x1F\x7F]/),{test:Et}=B(/[\x00-\x08\x0B-\x1F]/);let Nt=_t;const Pt=K`
	(?:
		0
		(?:
			b[01][_01]*
		|
			o[0-7][_0-7]*
		|
			x[\dA-Fa-f][_\dA-Fa-f]*
		|
			(?:\.\d[_\d]*)?(?:[Ee]-?\d[_\d]*)?
		)
	|
		[1-9][_\d]*
		(?:\.\d[_\d]*)?(?:[Ee]-?\d[_\d]*)?
	|
		inf
	|
		nan
	)
`.valueOf(),{test:Wt}=K`
	^(?:
		-?${Pt}
		(?:-${Pt})*
	|
		true
	|
		false
	)$
`.valueOf(),{test:Kt}=K`_(?![\dA-Fa-f])`.valueOf(),Rt=e=>Wt(e)&&!Kt(e);let qt,Ht,zt,Yt,Zt,Jt,Vt,Gt,Xt,Qt,en,tn,nn,rn=!0,sn=null,ln=!0,an=0n,on=0n;const cn=new ie,un=re.bind(cn),fn=se.bind(cn),hn=()=>{const e=n=>{const i=un(n);return i?i===e||J(t("Types in Array must be same"+Q(". Check "))):fn(n,e),n};return e},dn={asNulls:hn(),asStrings:hn(),asTables:hn(),asArrays:hn(),asBooleans:hn(),asFloats:hn(),asIntegers:hn(),asOffsetDateTimes:hn(),asLocalDateTimes:hn(),asLocalDates:hn(),asLocalTimes:hn()},pn=e=>e;let gn,bn,yn,wn,mn,xn,Tn,On,vn,$n,In,Sn=null,Fn=[],kn=0;const Ln=(e,t,n,i)=>{const r=h(d);r.tag=e,n&&(r.table=n,r.key=i),t&&(r.array=t,r.index=t.length),Fn[kn++]=r},Mn=()=>{throw J(a("xOptions.tag is not enabled, but found tag syntax"+Q(" at ")))};let Un=Mn;const An=Symbol,Bn=An("previous"),Dn=e=>{let t=e,n=t.next();if(!n.done)for(n.value[Bn]=t,n=(t=n.value).next();;)if(n.done){if(t===e)break;t=t[Bn],n=t.next(n.value)}else n.value[Bn]=t,n=(t=n.value).next();return n.value},jn=An("_literal"),Cn=(e,t)=>{const n=b(t);return n[jn]=e,n},_n=new oe,En=ue.bind(_n),Nn=ce.bind(_n),Pn=new oe,Wn=ue.bind(Pn),Kn=ce.bind(Pn),Rn=e=>{const t=[];return En(t),e&&Wn(t),t},qn=Date,Hn=Date.parse,zn=Object.preventExtensions,Yn=Object.getOwnPropertyDescriptors,Zn=function(e,t){for(var n=h(d),i=he(t),r=i.length,s=0;s<r;++s){var l=i[s];n[l]=k(t[l])}if(de){var a=de(t);for(r=a.length,s=0;s<r;++s){var o=a[s];I(t,o)&&(n[o]=k(t[o]))}}return be(e,n)},Jn=e=>(c(c(e).prototype),e),Vn=/(?:0[1-9]|[12]\d|30)/,Gn=/(?:0[1-9]|[12]\d|3[01])/,Xn=/(?:[01]\d|2[0-3])/,Qn=/[0-5]\d/,ei=K`
	\d\d\d\d-
	(?:
		0
		(?:
			[13578]-${Gn}
			|
			[469]-${Vn}
			|
			2-${/(?:0[1-9]|1\d|2\d)/}
		)
		|
		1
		(?:
			[02]-${Gn}
			|
			1-${Vn}
		)
	)
`.valueOf(),ti=K`
	${Xn}:${Qn}:${Qn}
`.valueOf(),{exec:ni}=B(/(([+-])\d\d):(\d\d)$/),{exec:ii}=K`
	^
	${ei}
	[Tt ]
	${ti}
	(?:\.\d{1,3}(\d*?)0*)?
	(?:[Zz]|[+-]${Xn}:${Qn})
	$`.valueOf(),{exec:ri}=K`
	^
	${ei}
	[Tt ]
	${ti}
	()
	[Zz]
	$`.valueOf(),{test:si}=K`
	^
	${ei}
	[Tt ]
	${ti}
	(?:\.\d+)?
	$`.valueOf(),{test:li}=K`
	^
	${ei}
	$`.valueOf(),{test:ai}=K`
	^
	${ti}
	(?:\.\d+)?
	$`.valueOf(),oi=/[ t]/,ci=/[-T:.]/g,ui=/\.?0+$/,fi=/\.(\d*?)0+$/,hi=(e,t)=>t,di=(()=>{const e=function(){return this},t=pe(null);{const e=pe(null);for(const n of Te(qn.prototype))"constructor"===n||"toJSON"===n||(t[n]=e)}return e.prototype=zn(h(qn.prototype,t)),c(e)})(),pi=e=>e.replace(fi,hi).replace(ci,""),gi=e=>"02-29"!==e.slice(5,10)||+e.slice(0,4)%4==0&&"00"!==e.slice(2,4),bi=Zn(new qn(0),Yn(qn.prototype)),yi=An("OffsetDateTime_ISOString"),wi=An("OffsetDateTime_value"),mi=(e,t=0)=>(bi.setTime(+e[wi]+t),bi),xi=Jn(class extends di{[yi];[wi];valueOf(){return this[wi]}toISOString(){return this[yi]}constructor(e){const{1:t}=gi(e)&&(Ht?ri:ii)(e)||J(a(`Invalid Offset Date-Time ${e}`+Q(" at ")));return super(),this[yi]=e.replace(oi,"T").replace("z","Z"),this[wi]=(""+Hn(this[yi])).padStart(15,"0")+(t?"."+t:""),this}getUTCFullYear(){return mi(this).getUTCFullYear()}getUTCMonth(){return mi(this).getUTCMonth()}getUTCDate(){return mi(this).getUTCDate()}getUTCHours(){return mi(this).getUTCHours()}getUTCMinutes(){return mi(this).getUTCMinutes()}getUTCSeconds(){return mi(this).getUTCSeconds()}getUTCMilliseconds(){return mi(this).getUTCMilliseconds()}getUTCDay(){return mi(this).getUTCDay()}getTimezoneOffset(){const e=ni(this[yi]);return e?60*+e[1]+ +(e[2]+e[3]):0}getTime(){return+this[wi].slice(0,15)}}),Ti=An("LocalDateTime_ISOString"),Oi=An("LocalDateTime_value"),vi=(e,t,n)=>+e[Ti].slice(t,n),$i=(e,t,n,i)=>{const r=""+i,s=n-t;if(r.length>s)throw te();e[Oi]=pi(e[Ti]=e[Ti].slice(0,t)+r.padStart(s,"0")+e[Ti].slice(n))},Ii=Jn(class extends di{[Ti];[Oi];valueOf(){return this[Oi]}toISOString(){return this[Ti]}constructor(e){return si(e)&&gi(e)||J(a(`Invalid Local Date-Time ${e}`+Q(" at "))),super(),this[Oi]=pi(this[Ti]=e.replace(oi,"T")),this}getFullYear(){return vi(this,0,4)}setFullYear(e){$i(this,0,4,e)}getMonth(){return vi(this,5,7)-1}setMonth(e){$i(this,5,7,e+1)}getDate(){return vi(this,8,10)}setDate(e){$i(this,8,10,e)}getHours(){return vi(this,11,13)}setHours(e){$i(this,11,13,e)}getMinutes(){return vi(this,14,16)}setMinutes(e){$i(this,14,16,e)}getSeconds(){return vi(this,17,19)}setSeconds(e){$i(this,17,19,e)}getMilliseconds(){return+this[Oi].slice(14,17).padEnd(3,"0")}setMilliseconds(e){this[Oi]=pi(this[Ti]=this[Ti].slice(0,19)+(e?("."+(""+e).padStart(3,"0")).replace(ui,""):""))}}),Si=An("LocalDate_ISOString"),Fi=An("LocalDate_value"),ki=(e,t,n)=>+e[Si].slice(t,n),Li=(e,t,n,i)=>{const r=""+i,s=n-t;if(r.length>s)throw te();e[Fi]=pi(e[Si]=e[Si].slice(0,t)+r.padStart(s,"0")+e[Si].slice(n))},Mi=Jn(class extends di{[Si];[Fi];valueOf(){return this[Fi]}toISOString(){return this[Si]}constructor(e){return li(e)&&gi(e)||J(a(`Invalid Local Date ${e}`+Q(" at "))),super(),this[Fi]=pi(this[Si]=e),this}getFullYear(){return ki(this,0,4)}setFullYear(e){Li(this,0,4,e)}getMonth(){return ki(this,5,7)-1}setMonth(e){Li(this,5,7,e+1)}getDate(){return ki(this,8,10)}setDate(e){Li(this,8,10,e)}}),Ui=An("LocalTime_ISOString"),Ai=An("LocalTime_value"),Bi=(e,t,n)=>+e[Ui].slice(t,n),Di=(e,t,n,i)=>{const r=""+i;if(r.length>n-t)throw te();e[Ai]=pi(e[Ui]=e[Ui].slice(0,t)+r.padStart(2,"0")+e[Ui].slice(n))},ji=Jn(class extends di{[Ui];[Ai];valueOf(){return this[Ai]}toISOString(){return this[Ui]}constructor(e){return ai(e)||J(a(`Invalid Local Time ${e}`+Q(" at "))),super(),this[Ai]=pi(this[Ui]=e),this}getHours(){return Bi(this,0,2)}setHours(e){Di(this,0,2,e)}getMinutes(){return Bi(this,3,5)}setMinutes(e){Di(this,3,5,e)}getSeconds(){return Bi(this,6,8)}setSeconds(e){Di(this,6,8,e)}getMilliseconds(){return+this[Ai].slice(6,9).padEnd(3,"0")}setMilliseconds(e){this[Ai]=pi(this[Ui]=this[Ui].slice(0,8)+(e?("."+(""+e).padStart(3,"0")).replace(ui,""):""))}}),Ci=parseInt,_i=String.fromCodePoint,Ei=/[^\\]+|\\(?:[\\"btnfr/]|u.{4}|U.{8})/gs,Ni=/[^\n\\]+|\n|\\(?:[\t ]*\n[\t\n ]*|[\\"btnfr/]|u.{4}|U.{8})/gs,Pi=e=>{if(!e)return"";const t=e.match(Ei),{length:n}=t;let i=0;do{const e=t[i];if("\\"===e[0])switch(e[1]){case"\\":t[i]="\\";break;case'"':t[i]='"';break;case"b":t[i]="\b";break;case"t":t[i]="\t";break;case"n":t[i]="\n";break;case"f":t[i]="\f";break;case"r":t[i]="\r";break;case"u":const n=Ci(e.slice(2),16);rn&&55295<n&&n<57344&&J(te(`Invalid Unicode Scalar ${e}`+Q(" at "))),t[i]=x(n);break;case"U":const r=Ci(e.slice(2),16);(rn&&55295<r&&r<57344||1114111<r)&&J(te(`Invalid Unicode Scalar ${e}`+Q(" at "))),t[i]=_i(r);break;case"/":t[i]="/"}}while(++i!==n);return t.join("")},Wi=(e,t,n)=>{if(!e)return"";const i=e.match(Ni),{length:r}=i;let s=0;do{const e=i[s];if("\n"===e)++n,i[s]=t;else if("\\"===e[0])switch(e[1]){case"\n":case" ":case"\t":for(let i=0;i=e.indexOf("\n",i)+1;)++n;i[s]="";break;case"\\":i[s]="\\";break;case'"':i[s]='"';break;case"b":i[s]="\b";break;case"t":i[s]="\t";break;case"n":i[s]="\n";break;case"f":i[s]="\f";break;case"r":i[s]="\r";break;case"u":const t=Ci(e.slice(2),16);rn&&55295<t&&t<57344&&J(te(`Invalid Unicode Scalar ${e}`+Q(" at ",Z+n))),i[s]=x(t);break;case"U":const r=Ci(e.slice(2),16);(rn&&55295<r&&r<57344||1114111<r)&&J(te(`Invalid Unicode Scalar ${e}`+Q(" at ",Z+n))),i[s]=_i(r);break;case"/":i[s]="/"}}while(++s!==r);return i.join("")},Ki=Number,Ri=/[-+]?(?:0|[1-9][_\d]*)/,{test:qi}=K`_(?!\d)`.valueOf(),{test:Hi}=K`^${Ri}$`.valueOf(),{test:zi}=B(/^0(?:x[\dA-Fa-f][_\dA-Fa-f]*|o[0-7][_0-7]*|b[01][_01]*)$/),{test:Yi}=K`_(?![\dA-Fa-f])`.valueOf(),Zi=/_|^[-+]/g,Ji=e=>(Hi(e)||zi(e))&&!Yi(e),Vi=e=>{Ji(e)||J(a(`Invalid Integer ${e}`+Q(" at ")));const t="-"===e[0]?-ne(e.replace(Zi,"")):ne(e.replace(Zi,""));return Xt||-9223372036854775808n<=t&&t<=9223372036854775807n||J(te(`Integer expect 64 bit range (-9,223,372,036,854,775,808 to 9,223,372,036,854,775,807), not includes ${e}`+Q(" meet at "))),t},Gi=e=>{if(!0===ln)return Vi(e);if(!1===ln)return(e=>{Ji(e)||J(a(`Invalid Integer ${e}`+Q(" at ")));const t="-"===e[0]?-e.replace(Zi,""):+e.replace(Zi,"");return le(t)||J(te(`Integer did not use BitInt must fit Number.isSafeInteger, not includes ${e}`+Q(" meet at "))),t})(e);const t=Vi(e);return an<=t&&t<=on?Ki(t):t},Xi=isFinite,{test:Qi}=K`
	^
	${Ri}
	(?:
		\.\d[_\d]*
		(?:[eE][-+]?\d[_\d]*)?
	|
		[eE][-+]?\d[_\d]*
	)
	$`.valueOf(),er=/_/g,{test:tr}=B(/^[-+]?0(?:\.0+)?(?:[eE][-+]?0+)?$/),{exec:nr}=B(/^[-0]?(\d*)(?:\.(\d+))?(?:e\+?(-?\d+))?$/),{exec:ir}=B(/^[-+]?0?(\d*)(?:\.(\d*?)0*)?(?:[eE]\+?(-?\d+))?$/),rr=e=>{if(!Qi(e)||qi(e)){if(Vt){if("inf"===e||"+inf"===e)return w;if("-inf"===e)return-1/0;if("nan"===e||"+nan"===e||"-nan"===e)return NaN}throw J(a(`Invalid Float ${e}`+Q(" at ")))}const t=e.replace(er,""),n=+t;if(Jt){Xi(n)||J(te(`Float ${e} has been as big as inf`+Q(" at "))),n||tr(t)||J(te(`Float ${e} has been as little as ${"-"===e[0]?"-":""}0`+Q(" at ")));const{1:i,2:r="",3:s=""}=nr(n),{1:l,2:a="",3:o=""}=ir(t);l+a===i+r&&o-a.length==s-r.length||J(te(`Float ${e} has lost its exact and been ${n}`+Q(" at ")))}return n},sr=(t,n)=>{const{length:i}=n;let r=0;for(;r<i;){const s=n[r++];if(!(s in t)){for(t=t[s]=new Gt(Je);r<i;)t=t[n[r++]]=new Gt(Je);return t}if(qe(t=t[s]))Ce(t)&&J(e("Trying to define Table under Inline Table"+Q(" at ")));else{if(!Nn(t))throw J(e("Trying to define Table under non-Table value"+Q(" at ")));Kn(t)&&J(e("Trying to append value to Static Array"+Q(" at "))),t=t[t.length-1]}}return t},lr=(t,n,i,r)=>{let s;if(i){let i;n in t?Nn(i=t[n])&&!Kn(i)||J(e("Trying to push Table to non-ArrayOfTables value"+Q(" at "))):i=t[n]=Rn(!1),r&&Un(r,i,t,n),i[i.length]=s=new Gt(Ze)}else n in t?(s=t[n],Xe(s)&&J(e("A table defined implicitly via key/value pair can not be accessed to via []"+Q(", which at "))),(e=>!!Ye(e)&&(We(e),!0))(s)||J(e("Duplicate Table definition"+Q(" at ")))):t[n]=s=new Gt(Ze),r&&Un(r,null,t,n);return s},ar=(t,n)=>{const{length:i}=n;let r=0;for(;r<i;){const s=n[r++];if(!(s in t)){for(t=t[s]=new Gt(Je,!0);r<i;)t=t[n[r++]]=new Gt(Je,!0);return t}qe(t=t[s])||J(e("Trying to assign property through non-Table value"+Q(" at "))),Ce(t)&&J(e("Trying to assign property through static Inline Table"+Q(" at "))),Xe(t)||J(e("A table defined implicitly via [] can not be accessed to via key/value pair"+Q(", which at ")))}return t},or=e=>(Nt(e)&&J(a("Control characters other than Tab are not permitted in a Literal String"+Q(", which was found at "))),e),cr=(e,t,n)=>{if(!n.startsWith("'''")){const i=rt(n)??J(a("Bad literal string"+Q(" at "))),r=or(i[1]);return e[t]=qt?Cn(n.slice(0,r.length+2),r):r,i[2]}const i=at(n.slice(3));if(i){const r=or(i[1])+i[2];return e[t]=qt?Cn(n.slice(0,r.length+6),r):r,i[3]}const r=new X("Multi-line Literal String",n.length),s=!(n=n.slice(3));if(s){n=r.must();const i=at(n);if(i){const r=or(i[1])+i[2];return e[t]=qt?Cn(["'''",n.slice(0,r.length+3)],r):r,i[3]}}sn??r.nowrap();for(const l=[or(n)];;){const i=r.must(),a=at(i);if(a){l[l.length]=or(a[1])+a[2];const i=l.join(sn);return qt?(l[l.length-1]+="'''",s?l.unshift("'''"):l[0]=`'''${n}`,e[t]=Cn(l,i)):e[t]=i,a[3]}l[l.length]=or(i)}},ur=(e,t,n)=>{if(!n.startsWith('"""')){const i=St(n),r=Pi(n.slice(1,i));return e[t]=qt?Cn(n.slice(0,i+1),r):r,n.slice(i+1).replace(nt,"")}let i=3+pt(n.slice(3));if(n.length!==i){const r=n.slice(3,i);xt(r)||J(a("Bad multi-line basic string"+Q(" at ")));const s=Pi(r)+(n.startsWith('"',i+=3)?n.startsWith('"',++i)?(++i,'""'):'"':"");return e[t]=qt?Cn(n.slice(0,i),s):s,n.slice(i).replace(nt,"")}const r=new X("Multi-line Basic String",i),s=(n=n.slice(3))?0:1;if(s){n=r.must();let i=pt(n);if(n.length!==i){const r=n.slice(0,i);xt(r)||J(a("Bad multi-line basic string"+Q(" at ")));const l=Wi(r,sn,s)+(n.startsWith('"',i+=3)?n.startsWith('"',++i)?(++i,'""'):'"':"");return e[t]=qt?Cn(['"""',n.slice(0,i)],l):l,n.slice(i).replace(nt,"")}}sn??r.nowrap(),xt(n+"\n")||J(a("Bad multi-line basic string"+Q(" at ")));for(const l=[n];;){const i=r.must();let o=pt(i);if(i.length!==o){const r=i.slice(0,o);xt(r)||J(a("Bad multi-line basic string"+Q(" at ")));const c=Wi(l.join("\n")+"\n"+r,sn,s)+(i.startsWith('"',o+=3)?i.startsWith('"',++o)?(++o,'""'):'"':"");return qt?(s?l.unshift('"""'):l[0]=`"""${n}`,l[l.length]=`${r}"""`,e[t]=Cn(l,c)):e[t]=c,i.slice(o).replace(nt,"")}xt(i+"\n")||J(a("Bad multi-line basic string"+Q(" at "))),l[l.length]=i}},fr=pe(null),hr=e=>fr[e]??(fr[e]=An(e)),dr=An("this"),{test:pr}=B(/\r?\n/g),gr=(e,n)=>{if(n in e){const i=e[n];if("string"!=typeof i)throw t(`the value of comment must be a string, while "${null===i?"null":typeof i}" type is found`);if(pr(i))throw a("the value of comment must be a string and can not include newline");return` #${i}`}return""},br=(e,t)=>t in fr?gr(e,fr[t]):"",{test:yr}=B(/(?:[Zz]|[+-]\d\d:\d\d)$/),{test:wr}=B(/^\[[\t ]*]/),mr=e=>{let t=e;const n=[];let i=-1;for(;;){if(t||J(a("Empty bare key"+Q(" at "))),'"'===t[0]){const e=St(t);n[++i]=Pi(t.slice(1,e)),t=t.slice(e+1)}else{const e="'"===t[0],r=((e?Dt:Ut)(t)??J(a(`Bad ${e?"literal string":"bare"} key`+Q(" at "))))[0];t=t.slice(r.length),n[++i]=e?r.slice(1,-1):r}if(!Ft(t))break;t=t.replace(kt,"")}if(nn){const n=e.slice(0,-t.length);(Rt(n)||Qt&&"null"===n)&&J(a("Bad bare key disabled by xOptions.string"+Q(" at ")))}if(Zt){let e=i;do{n[e]||J(a("Empty key is not allowed before TOML v0.5"+Q(", which at ")))}while(e--)}const r=n[i];return n.length=i,{leadingKeys:n,finalKey:r,lineRest:t}},xr=(e,t)=>{if("<"===t[0]){const{1:n}=({2:t}=ft(t)??J(a("Bad tag "+Q(" at "))));switch(Un(n,e,null),t&&t[0]){case",":case"]":case"":case"#":return e[e.length]=i,t}}switch(t[0]){case"'":return cr(bn(e),e.length,t);case'"':return ur(bn(e),e.length,t);case"{":return zt||J(a("Inline Table is not allowed before TOML v0.4"+Q(", which at "))),Or(yn(e),e.length,t);case"[":return Tr(wn(e),e.length,t)}const{1:n}=({2:t}=it(t)??J(a("Bad atom value"+Q(" at "))));return"true"===n?mn(e)[e.length]=!0:"false"===n?mn(e)[e.length]=!1:Qt&&"null"===n?gn(e)[e.length]=null:n.includes(":")?n.includes("-")?yr(n)?On(e)[e.length]=new xi(n):(Yt||J(a("Local Date-Time is not allowed before TOML v0.5"+Q(", which at "))),vn(e)[e.length]=new Ii(n)):(Yt||J(a("Local Time is not allowed before TOML v0.5"+Q(", which at "))),In(e)[e.length]=new ji(n)):n.indexOf("-")!==n.lastIndexOf("-")&&"-"!==n[0]?(Yt||J(a("Local Date is not allowed before TOML v0.5"+Q(", which at "))),$n(e)[e.length]=new Mi(n)):n.includes(".")||n.includes("n")||(n.includes("e")||n.includes("E"))&&!n.startsWith("0x")?xn(e)[e.length]=qt?Cn(n,rr(n)):rr(n):Tn(e)[e.length]=qt?Cn(n,Gi(n)):Gi(n),t},Tr=function*(e,t,n){const i=e[t]=Rn(!0);if(wr(n))return Ee(i,"]"===n[1]?0:3),n.slice(n.indexOf("]")).replace(ot,"");const r=new X("Static Array",n.length);let s=n.startsWith("[ ")||n.startsWith("[\t")?3:0;for(n=n.replace(ot,"");!n||"#"===n[0];)s=null,n=r.must().replace(nt,"");if("]"===n[0])return null===s||Ee(i,s),n.replace(ot,"");for(;;){const e=xr(i,n);for(n="string"==typeof e?e:yield e;!n||"#"===n[0];)s=null,n=r.must().replace(nt,"");if(","!==n[0]){if("]"===n[0])break;throw J(a("Unexpect character in static array item value"+Q(", which is found at ")))}for(n=n.replace(ot,"");!n||"#"===n[0];)s=null,n=r.must().replace(nt,"");if("]"===n[0])break}return null===s||Ee(i,s),n.replace(ot,"")},Or=function*(e,t,n){const i=e[t]=new Gt(Ze,!0);if(en){const e=new X("Inline Table",n.length);n=n.replace(ot,"");let t=!0;for(;;){for(;!n||"#"===n[0];)t=!1,n=e.must().replace(nt,"");if("}"===n[0])break;const r=vr(i,n),s=$r(r);if(n="string"==typeof s?s:yield s){if("#"===n[0]){tn&&(r.table[hr(r.finalKey)]=n.slice(1)),t=!1;do{n=e.must().replace(nt,"")}while(!n||"#"===n[0])}}else{t=!1;do{n=e.must().replace(nt,"")}while(!n||"#"===n[0])}","===n[0]&&(n=n.replace(ot,""))}t||Ee(i,!1)}else if("}"!==(n=n.replace(ot,"")||J(a("Inline Table is intended to appear on a single line"+Q(", which broken at "))))[0])for(;;){"#"===n[0]&&J(a("Inline Table is intended to appear on a single line"+Q(", which broken at ")));const e=$r(vr(i,n));if("}"===(n=("string"==typeof e?e:yield e)||J(a("Inline Table is intended to appear on a single line"+Q(", which broken at "))))[0])break;","===n[0]&&"}"===(n=n.replace(ot,"")||J(a("Inline Table is intended to appear on a single line"+Q(", which broken at "))))[0]&&J(a("The last property of an Inline Table can not have a trailing comma"+Q(", which was found at ")))}return n.replace(ot,"")},vr=(e,t)=>{const{leadingKeys:n,finalKey:i,tag:r}=({lineRest:t}=(({leadingKeys:e,finalKey:t,lineRest:n})=>{const{1:i=""}=({2:n}=ut(n)??J(a("Keys must equal something"+Q(", but missing at "))));return i||n&&"#"!==n[0]||J(a("Value can not be missing after euqal sign"+Q(", which is found at "))),{leadingKeys:e,finalKey:t,tag:i,lineRest:n}})(mr(t)));return{table:ar(e,n),finalKey:i,tag:r,lineRest:t}},$r=({finalKey:t,tag:n,lineRest:r,table:s})=>{if(t in s&&J(e("Duplicate property definition"+Q(" at "))),n)switch(Un(n,null,s,t),r&&r[0]){case",":case"}":case"":case"#":return s[t]=i,r}switch(r&&r[0]){case"'":return cr(s,t,r);case'"':return ur(s,t,r);case"{":return zt||J(a("Inline Table is not allowed before TOML v0.4"+Q(", which at "))),Or(s,t,r);case"[":return Tr(s,t,r)}const{1:l}=({2:r}=it(r)??J(a("Bad atom value"+Q(" at "))));return"true"===l?s[t]=!0:"false"===l?s[t]=!1:Qt&&"null"===l?s[t]=null:l.includes(":")?l.includes("-")?yr(l)?s[t]=new xi(l):(Yt||J(a("Local Date-Time is not allowed before TOML v0.5"+Q(", which at "))),s[t]=new Ii(l)):(Yt||J(a("Local Time is not allowed before TOML v0.5"+Q(", which at "))),s[t]=new ji(l)):l.indexOf("-")!==l.lastIndexOf("-")&&"-"!==l[0]?(Yt||J(a("Local Date is not allowed before TOML v0.5"+Q(", which at "))),s[t]=new Mi(l)):s[t]=l.includes(".")||l.includes("n")||(l.includes("e")||l.includes("E"))&&!l.startsWith("0x")?qt?Cn(l,rr(l)):rr(l):qt?Cn(l,Gi(l)):Gi(l),r},Ir=Uint8Array,Sr="undefined"==typeof Buffer?i:Buffer,Fr=e=>"byteLength"in e,kr="A TOML doc must be a (ful-scalar) valid UTF-8 file, without any unknown code point.",Lr=Sr?(({isBuffer:t,[m]:n,byteLength:i,allocUnsafe:r,from:s})=>{if("function"==typeof Sr.prototype.utf8Write){const l=Sr.alloc(7);if(l.utf8Write("𠮷利",0,7),l.equals(s("𠮷利")))return s=>{if(!s.byteLength)return"";const l=t(s)?s:"length"in s?new n(s.buffer,s.byteOffset,s.byteLength):new n(s),a=l.toString();if(a.includes("�")){const t=i(a);if(t!==l.length)throw e(kr);const n=r(t);if(n.utf8Write(a,0,t),!n.equals(l))throw e(kr)}return"\ufeff"===a[0]?a.slice(1):a}}return i=>{if(!i.byteLength)return"";const r=t(i)?i:"length"in i?new n(i.buffer,i.byteOffset,i.byteLength):new n(i),l=r.toString();if(l.includes("�")&&!s(l).equals(r))throw e(kr);return"\ufeff"===l[0]?l.slice(1):l}})(Sr):t=>{if(!t.byteLength)return"";const n="length"in t?t:new Ir(t),{length:i}=n,r=i-1,s=r-1,l=s-1,a=[];let o=0,c=0;do{let t=n[c];if(t<192){if(t<128){a[o++]=x(t),c+=1;continue}}else if(t<224){if(c<r){const e=n[c+1];if(128==(192&e)&&(t=(31&t)<<6|63&e,127<t)){a[o++]=x(t),c+=2;continue}}}else if(t<240){if(c<s){const e=n[c+1],i=n[c+2];if(128==(192&e)&&128==(192&i)&&(t=(15&t)<<12|(63&e)<<6|63&i,(t<55296?2047:57343)<t)){a[o++]=x(t),c+=3;continue}}}else if(c<l){const e=n[c+1],i=n[c+2],r=n[c+3];if(128==(192&e)&&128==(192&i)&&128==(192&r)&&(t=(15&t)<<18|(63&e)<<12|(63&i)<<6|63&r,65535<t&&t<1114112)){a[o++]=_i(t),c+=4;continue}}throw e(kr)}while(c!==i);const u=a.join("");return"\ufeff"===u[0]?u.slice(1):u},{test:Mr}=B(/[\uD800-\uDFFF]/u);let Ur=!1;const Ar=(n,r,s,l,o)=>{if(Ur)throw e("parse during parsing.");let c,u;Ur=!0;try{let f="";if("object"==typeof n&&n)if(Fr(n))n=Lr(n);else{if(f=n.path,"string"!=typeof f)throw t("TOML.parse(source.path)");const{data:e,require:r=("function"==typeof require?require:i)}=n;if(r){const s=r.resolve?.paths?.("")?.[0]?.replace(/node_modules$/,"");if(s&&(f=r("path").resolve(s,f),"string"!=typeof f))throw t("TOML.parse(source.require('path').resolve)");if(e===i){const e=r("fs").readFileSync(f);if("object"!=typeof e||!e||!Fr(e))throw t("TOML.parse(source.require('fs').readFileSync)");n=Lr(e)}else if("string"==typeof e)n=e;else{if("object"!=typeof e||!e||!Fr(e))throw t("TOML.parse(source.data)");n=Lr(e)}}else{if(e===i)throw t("TOML.parse(source.data|source.require)");if("string"==typeof e)n=e;else{if("object"!=typeof e||!e||!Fr(e))throw t("TOML.parse(source.data)");n=Lr(e)}}}else if("string"!=typeof n)throw t("TOML.parse(source)");try{if(Mr(n))throw e("A TOML doc must be a (ful-scalar) valid UTF-8 file, without any uncoupled UCS-4 character code.");if("object"==typeof s&&s){if(l!==i||o!==i)throw t("options mode ? args mode");({joiner:s,bigint:l,x:o}=s)}try{((e,n,r,s)=>{let l;switch(e){case 1:rn=l=Yt=Vt=zt=!0,Ht=Zt=!1;break;case.5:rn=Yt=Vt=zt=!0,l=Ht=Zt=!1;break;case.4:rn=Zt=zt=!0,l=Ht=Yt=Vt=!1;break;case.3:rn=Zt=!0,l=Ht=Yt=Vt=zt=!1;break;case.2:case.1:Ht=Zt=!0,rn=l=Yt=Vt=zt=!1;break;default:throw te("TOML.parse(,specificationVersion)")}if((e=>{switch(e){case 1:at=st,Dt=At,Nt=_t,mt=gt,It=Tt,Ut=Lt,jt=!0;break;case.5:at=lt,Dt=At,Nt=_t,mt=bt,It=Ot,Ut=Lt,jt=!0;break;case.4:at=lt,Dt=Bt,Nt=Et,mt=yt,It=vt,Ut=Lt,jt=!0;break;default:at=lt,Dt=Bt,Nt=Et,mt=wt,It=$t,Ut=Mt,jt=!1}})(e),"string"==typeof n)sn=n;else{if(n!==i)throw t("TOML.parse(,,multilineStringJoiner)");sn=null}if(r===i||!0===r)ln=!0;else if(!1===r)ln=!1;else{if("number"!=typeof r)throw t("TOML.parse(,,,useBigInt)");if(!le(r))throw te("TOML.parse(,,,useBigInt)");ln=null,r>=0?an=-(on=ne(r)):on=-(an=ne(r))-1n}if(null==s)Gt=Qe,Jt=Xt=Qt=en=!1,Un=Mn;else{if("object"!=typeof s)throw t("TOML.parse(,,,"+typeof s);{const{order:e,longer:n,exact:i,null:r,multi:a,comment:o,string:c,literal:u,tag:f,...h}=s,d=ae(h);if(d.length)throw t(`TOML.parse(,,,,{ ${d.join(", ")} })`);if(Gt=e?et:Qe,Xt=!n,Jt=!!i,Qt=!!r,en=!!a,tn=!!o,nn=!!c,qt=!!u,f){if("function"!=typeof f)throw t("TOML.parse(,,,,xOptions.tag)");if(!l)throw t("TOML.parse(,,,,xOptions) xOptions.tag needs at least TOML 1.0 to support mixed type array");Sn=f,Un=Ln}else Un=Mn}}l?gn=bn=yn=wn=mn=xn=Tn=On=vn=$n=In=pn:({asNulls:gn,asStrings:bn,asTables:yn,asArrays:wn,asBooleans:mn,asFloats:xn,asIntegers:Tn,asOffsetDateTimes:On,asLocalDateTimes:vn,asLocalDates:$n,asLocalTimes:In}=dn)})(r,s,l,o),G(n,f);try{n&&"\ufeff"===n[0]&&J(t("TOML content (string) should not start with BOM (U+FEFF)"+Q(" at "))),c=(()=>{const e=new Gt;let t=e;for(;Z!==Y;){const n=z[++Z].replace(nt,"");if(n)if("["===n[0]){const{leadingKeys:i,finalKey:r,asArrayItem:s,tag:l,lineRest:o}=Ct(n,mr),c=sr(e,i);o&&("#"===o[0]||J(a("Unexpect charachtor after table header"+Q(" at ")))),t=lr(c,r,s,l),tn&&o&&(t[dr]=s?o.slice(1):c[hr(r)]=o.slice(1))}else if("#"===n[0])Nt(n)&&J(a("Control characters other than Tab are not permitted in comments"+Q(", which was found at ")));else{const e=vr(t,n);let i=$r(e);"string"==typeof i||(i=Dn(i)),i&&("#"===i[0]||J(a("Unexpect charachtor after key/value pair"+Q(" at "))),tn&&(e.table[hr(e.finalKey)]=i.slice(1)))}}return e})(),u=(()=>{if(kn){let e=kn;const t=Sn,n=Fn;return Fn=[],()=>{do{t(n[--e]),n.length=e}while(e)}}return null})()}finally{ee()}}finally{Sn=null,Fn.length=kn=0,Ht=!1,sn=null}}finally{R()}}finally{Ur=!1}return u?.(),c},Br=n(((e,t,n,i,r)=>"number"==typeof t?Ar(e,t,n,i,r):Ar(e,1,t,n,i)),{"1.0":(e,t,n,i)=>Ar(e,.1,t,n,i),1:(e,t,n,i)=>Ar(e,1,t,n,i),.5:(e,t,n,i)=>Ar(e,.5,t,n,i),.4:(e,t,n,i)=>Ar(e,.4,t,n,i),.3:(e,t,n,i)=>Ar(e,.3,t,n,i),.2:(e,t,n,i)=>Ar(e,.2,t,n,i),.1:(e,t,n,i)=>Ar(e,.1,t,n,i)}),Dr=Number.MAX_SAFE_INTEGER,jr=Date.prototype,Cr=Object.prototype.isPrototypeOf,_r=String.prototype.valueOf,Er=Number.prototype.valueOf,Nr="undefined"==typeof BigInt?i:BigInt.prototype.valueOf,Pr=Nr?function(e){try{u(Nr,e,$)}catch(t){return!1}return!0}:function(){return!1},Wr=Boolean.prototype.valueOf,Kr=pe({...ye([...T(32)].map(((e,t)=>[x(t),"\\u"+t.toString(16).toUpperCase().padStart(4,"0")]))),"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"','"""':'""\\"',"\\":"\\\\","":"\\u007F"}),{test:Rr}=B(/[\x00-\x08\x0A-\x1F'\x7F]/),qr=/[^\x00-\x08\x0A-\x1F"\\\x7F]+|./gs,{test:Hr}=B(/^[\x00-\x08\x0A-\x1F"\\\x7F]/),zr=e=>{if(Rr(e)){const t=e.match(qr);let n=t.length;do{Hr(t[--n])&&(t[n]=Kr[t[n]])}while(n);return`"${t.join("")}"`}return`'${e}'`},{test:Yr}=B(/[\x00-\x08\x0A-\x1F\x7F]|'''/),{test:Zr}=B(/[\x00-\x08\x0B-\x1F\x7F]|'''/),{test:Jr}=B(/[\x00-\x08\x0A-\x1F\\\x7F]|"""/),Vr=/[^\x00-\x08\x0A-\x1F"\\\x7F]+|"""|./gs,{test:Gr}=B(/^(?:[\x00-\x08\x0A-\x1F\\\x7F]|""")/),Xr=(e,t)=>{const n=e[t];if(Jr(n)){const i=n.match(Vr);let r=i.length;do{Gr(i[--r])&&(i[r]=Kr[i[r]])}while(r);e[t]=i.join("")}},Qr=e=>1===(e=["",...e]).length?["",""]:e,es=e=>{let t=e.length-1;for(Xr(e,t),e[t]+=e[0]='"""';--t;)Xr(e,t);return e},ts=e=>(e[e.length-1]+=e[0]="'''",e),{test:ns}=B(/^-?\d+$/),is=Cr.bind(jr),{test:rs}=B(/^[\w-]+$/),ss=e=>rs(e)?e:zr(e),ls=/[^.]+/,as=e=>`'${e}'`,os=e=>Rt(e)?e.replace(ls,as):"null"===e?"'null'":e;class cs extends T{document;constructor(e){return super(),this.document=e,this}[An.toPrimitive](){return this.join(this.document.newline)}appendNewline(){this[this.length]=""}set appendLine(e){this[this.length]=e}set appendInline(e){this[this.length-1]+=e}set appendInlineIf(e){e&&(this[this.length-1]+=e)}*assignBlock(e,n,i,r){const{document:s}=this,{newlineUnderHeader:l,newlineUnderSectionButPair:a}=s,o=!!n&&s.newlineUnderPairButDotted,c=n?s.newlineUnderDotted:s.newlineUnderPair;for(const u of r){const r=i[u],f=ss(u),h=e+f;if(y(r)){const{length:e}=r;if(e){let n=r[0];if(Pe(n)){const i=`[[${h}]]`,o=h+".";let c=0,u=n;for(;;){const n=s.appendSection();if(n[0]=i+gr(u,dr),l?(n[1]="",yield n.assignBlock(o,"",u,ae(u)),a&&2!==n.length&&n.appendNewline()):(yield n.assignBlock(o,"",u,ae(u)),a&&n.appendNewline()),++c===e)break;if(u=r[c],!Pe(u))throw t("the first table item marked by Section() means the parent array is an array of tables, which can not include other types or table not marked by Section() any more in the rest items")}continue}{let n=1;for(;n!==e;)if(Pe(r[n++]))throw t("if an array is not array of tables, it can not include any table that marked by Section()")}}}else if(Pe(r)){const e=s.appendSection();e[0]=`[${h}]${s.preferCommentForThis?gr(r,dr)||br(i,u):br(i,u)||gr(r,dr)}`,l?(e[1]="",yield e.assignBlock(h+".","",r,ae(r)),a&&2!==e.length&&e.appendNewline()):(yield e.assignBlock(h+".","",r,ae(r)),a&&e.appendNewline());continue}const d=n+f;this.appendLine=os(d)+" = ";const p=this.value("",r,!0);p?(--this.length,yield this.assignBlock(h+".",d+".",r,p),o&&this.appendNewline()):(this.appendInlineIf=br(i,u),c&&this.appendNewline())}}value(e,n,r){switch(typeof n){case"object":if(null===n){if(this.document.nullDisabled)throw t('toml can not stringify "null" type value without truthy options.xNull');this.appendInline="null";break}const s=_e(n);if(y(n)){s===i?this.staticArray(e,n):this.singlelineArray(e,n,s);break}if(s!==i){s||this.document.multilineTableDisabled?this.inlineTable(e,n):this.multilineTable(e,n,this.document.multilineTableComma);break}if(is(n)){this.appendInline=this.document._?n.toISOString().replace("T"," "):n.toISOString();break}if(jn in n){const e=n[jn];if("string"==typeof e)this.appendInline=e;else{if(!y(e))throw t("literal value is broken");{const{length:n}=e;if(!n)throw t("literal value is broken");{this.appendInline=e[0];let t=1;for(;t!==n;)this.appendLine=e[t++]}}}break}if(function(e){try{u(_r,e,$)}catch(t){return!1}return!0}(n))throw t("TOML.stringify refuse to handle [object String]");if(function(e){try{u(Er,e,$)}catch(t){return!1}return!0}(n))throw t("TOML.stringify refuse to handle [object Number]");if(Pr(n))throw t("TOML.stringify refuse to handle [object BigInt]");if(function(e){try{u(Wr,e,$)}catch(t){return!1}return!0}(n))throw t("TOML.stringify refuse to handle [object Boolean]");if(r){const e=ae(n);if(e.length)return e;this.appendInline="{ }"}else this.inlineTable(e,n);break;case"bigint":this.appendInline=""+n;break;case"number":this.appendInline=this.document.asInteger(n)?ge(n,-0)?"-0":""+n:(e=>{return e?e===w?"inf":e===-1/0?"-inf":ns(t=""+e)?t+".0":t:e==e?ge(e,0)?"0.0":"-0.0":"nan";var t})(n);break;case"string":this.appendInline=zr(n);break;case"boolean":this.appendInline=n?"true":"false";break;default:throw t(`toml can not stringify "${typeof n}" type value`)}return null}singlelineArray(e,t,n){const{length:i}=t;if(i){this.appendInline=2&n?"[ ":"[",this.value(e,t[0],!1);let r=1;for(;r!==i;)this.appendInline=", ",this.value(e,t[r++],!1);this.appendInline=2&n?" ]":"]"}else this.appendInline=1&n?"[ ]":"[]"}staticArray(e,t){this.appendInline="[";const n=e+this.document.indent,{length:i}=t;let r=0;for(;r!==i;)this.appendLine=n,this.value(n,t[r++],!1),this.appendInline=",";this.appendLine=e+"]"}inlineTable(e,t){const n=ae(t);n.length?(this.appendInline="{ ",this.assignInline(e,t,"",n),this[this.length-1]=this[this.length-1].slice(0,-2)+" }"):this.appendInline="{ }"}multilineTable(e,t,n){this.appendInline="{",this.assignMultiline(e,t,"",ae(t),n),this.appendLine=e+"}"}assignInline(e,t,n,i){for(const r of i){const i=t[r],s=n+ss(r),l=this.appendInline=os(s)+" = ",a=this.value(e,i,!0);a?(this[this.length-1]=this[this.length-1].slice(0,-l.length),this.assignInline(e,i,s+".",a)):this.appendInline=", "}}assignMultiline(e,t,n,i,r){const s=e+this.document.indent;for(const l of i){const i=t[l],a=n+ss(l);this.appendLine=s+os(a)+" = ";const o=this.value(s,i,!0);o?(--this.length,this.assignMultiline(e,i,a+".",o,r)):r?this.appendInline=","+br(t,l):this.appendInlineIf=br(t,l)}}}const us=pe({document:0,section:1,header:2,pairs:3,pair:4}),{test:fs}=B(/^[\t ]*$/),hs=()=>!1;class ds extends T{get["constructor"](){return T}0=new cs(this);asInteger;newline="";newlineUnderSection;newlineUnderSectionButPair;newlineUnderHeader;newlineUnderPair;newlineUnderPairButDotted;newlineUnderDotted;indent;_;nullDisabled;multilineTableDisabled;multilineTableComma;preferCommentForThis=!1;constructor(e){super();const n=e?.integer;if(void 0===n)this.asInteger=hs;else if(n===Dr)this.asInteger=le;else{if("number"!=typeof n)throw t("TOML.stringify(,{integer}) can only be number");{if(!le(n))throw te("TOML.stringify(,{integer}) can only be a safe integer");const e=n>=0?n:-n-1,t=n>=0?-n:n;this.asInteger=n=>le(n)&&t<=n&&n<=e}}const i=e?.newline;if(void 0===i)this.newline="";else{if("\n"!==i&&"\r\n"!==i)throw"string"==typeof i?a("TOML.stringify(,{newline}) can only be valid TOML newline"):t("TOML.stringify(,{newline}) can only be string");this.newline=i}const r=e?.preferCommentFor;if(void 0===r||"key"===r);else{if("this"!==r)throw t("TOML.stringify(,{preferCommentFor) can only be 'key' or 'this'");this.preferCommentForThis=!0}const s=us[e?.newlineAround??"header"]??us.header;this.newlineUnderSection=s>0,this.newlineUnderSectionButPair=1===s||2===s,this.newlineUnderHeader=s>1,this.newlineUnderPair=s>2,this.newlineUnderPairButDotted=3===s,this.newlineUnderDotted=s>3;const l=e?.indent;if(void 0===l)this.indent="\t";else if("string"==typeof l){if(!fs(l))throw a("TOML.stringify(,{indent}) can only include Tab or Space");this.indent=l}else{if("number"!=typeof l)throw t(`TOML.stringify(,{indent}) can not be "${typeof l}" type`);if(!le(l))throw te(`TOML.stringify(,{indent:${l}}) is out of range`);this.indent=" ".repeat(l)}this._=" "===e?.T,this.nullDisabled=!e?.xNull;const o=e?.xBeforeNewlineInMultilineTable;return""===o?(this.multilineTableDisabled=!1,this.multilineTableComma=!1):","===o?(this.multilineTableDisabled=!1,this.multilineTableComma=!0):(this.multilineTableDisabled=!0,this.multilineTableComma=!0),this}appendSection(){return this[this.length]=new cs(this)}}return L({version:"1.28.0",parse:Br,stringify:(e,t)=>{const n=new ds(t),i=n[0];return i[0]="",Dn(i.assignBlock("","",e,ae(e))),n.newlineUnderSectionButPair&&1!==i.length&&i.appendNewline(),n.newlineUnderSection||n[n.length-1].appendNewline(),n.newline?n.join(n.newline):n.flat()},Section:e=>{if(y(e))throw t("array can not be section, maybe you want to use it on the tables in it");return We(e),De(e),e},inline:(e,n,r)=>{if(y(e)){if(r)n=3;else if(n===i)n=3;else if(0!==n&&1!==n&&2!==n&&3!==n)throw"number"==typeof n?te(`array inline mode must be 0 | 1 | 2 | 3, not including ${n}`):t('array inline mode must be "number" type, not including '+(null===n?'"null"':typeof n));Ee(e,n)}else Ee(e,!0),je(e);return e},multiline:(()=>{const e=(e,t)=>"string"==typeof e?Cn((Zr(e)?es:ts)(("\n"+e).split("\n")),e):y(e)?Cn((e=>{const t=e.length-1;let n=t;do{if(Yr(e[n]))break}while(--n);if(n)for(n=t,Xr(e,n),e[n]+=e[0]='"""';--n;)Xr(e,n);else e[t]+=e[0]="'''";return e})(Qr(e)),"string"==typeof t?t:pe(null)):(e=>(Ee(e,!1),je(e),e))(e);return e.basic=(e,t)=>"string"==typeof e?Cn(es(("\n"+e).split("\n")),e):Cn(es(Qr(e)),"string"==typeof t?t:pe(null)),e.array=Ne,c(e),e})(),basic:e=>Cn((e=>{if(e){const t=e.match(qr);let n=t.length;do{Hr(t[--n])&&(t[n]=Kr[t[n]])}while(n);return`"${t.join("")}"`}return'""'})(e),e),literal:(e,...t)=>{if("string"==typeof e){if(1===t.length)return Cn(e.includes("\n")?e.split("\n"):e,t[0])}else{let n=t.length;if(n){const{raw:i}=e;for(e=i[n];n;)t[--n]+=i[n];e=t.join("")+e}else e=e.raw[0]}return Cn(e.includes("\n")?e.split("\n"):e,pe(null))},commentFor:hr,commentForThis:dr,OffsetDateTime:xi,LocalDateTime:Ii,LocalDate:Mi,LocalTime:ji,isInline:Ce,isSection:Pe})}));
//# sourceMappingURL=j-toml.min.js.map