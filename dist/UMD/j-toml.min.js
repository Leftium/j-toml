/*!@preserve@license
 * 模块名称：j-toml
 * 模块功能：龙腾道为汤小明语写的实现。从属于“简计划”。
   　　　　　An implementation of TOML written by LongTengDao. Belong to "Plan J".
 * 模块版本：1.21.0
 * 许可条款：LGPL-3.0
 * 所属作者：龙腾道 <LongTengDao@LongTengDao.com> (www.LongTengDao.com)
 * 问题反馈：https://GitHub.com/LongTengDao/j-toml/issues
 * 项目主页：https://GitHub.com/LongTengDao/j-toml/
 */
(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).TOML=t()})(this,(function(){"use strict";const e=Error,t=TypeError,n=Object.assign,i=void 0,r=Function.prototype.bind,s=RegExp.prototype.test,a=RegExp.prototype.exec,l=SyntaxError,o=RegExp,c=Object.freeze,u=Reflect.apply,f=Proxy,h=Object.create,d=Object.seal?Object.preventExtensions(Object.create(null)):null,p="undefined"==typeof Symbol?i:Symbol.toStringTag,g=Object.defineProperty,b=Array.isArray,y=1/0,w=String.fromCharCode,m=Array,x=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var O=T.call.bind(T),S=function(){return x.bind?x.call.bind(x):function(e,t){return x.call(e,t)}}(),I=Object.create;const v=function(e,t){if(t||(t=e,e=h(d)),n)n(e,t);else for(var i in t)S(t,i)&&(e[i]=t[i]);if(e.default=e,p){var r=h(d);r.value="Module",g(e,p,r)}return"function"==typeof e&&e.prototype&&c(e.prototype),c(e)};var $=r?r.bind(s):function(e){return function(t){return s.call(e,t)}},M=r?r.bind(a):function(e){return function(t){return a.call(e,t)}};function F(e){var t=e.test=$(e),n=e.exec=M(e),i=t.source=n.source=e.source;return t.unicode=n.unicode=e.unicode,t.ignoreCase=n.ignoreCase=e.ignoreCase,t.multiline=n.multiline=i.indexOf("^")<0&&i.indexOf("$")<0?null:e.multiline,t.dotAll=n.dotAll=i.indexOf(".")<0?null:e.dotAll,e}var L=/[\n\t]+/g,k=/\\./g;function U(e){return"\\`"===e?"`":e}var A="".includes?function(e,t){return e.includes(t)}:function(e,t){return e.indexOf(t)>-1};function B(e){for(var n=this.U,i=this.I,r=this.M,s=this.S,a=e.raw,c=a[0].replace(L,""),u=1,f=arguments.length;u!==f;){var h=arguments[u];if("string"==typeof h)c+=h;else{var d=h.source;if("string"!=typeof d)throw t("source");if(h.unicode===n)throw l("unicode");if(h.ignoreCase===i)throw l("ignoreCase");if(h.multiline===r&&(A(d,"^")||A(d,"$")))throw l("multiline");if(h.dotAll===s&&A(d,"."))throw l("dotAll");c+=d}c+=a[u++].replace(L,"")}var p=o(n?c=c.replace(k,U):c,this.flags),g=p.test=$(p),b=p.exec=M(p);return g.source=b.source=c,g.unicode=b.unicode=!n,g.ignoreCase=b.ignoreCase=!i,g.multiline=b.multiline=A(c,"^")||A(c,"$")?!r:null,g.dotAll=b.dotAll=A(c,".")?!s:null,p}var D=r&&r.bind(B);function C(e){return{U:!A(e,"u"),I:!A(e,"i"),M:!A(e,"m"),S:!A(e,"s"),flags:e}}var j=C(""),_=f?new f(B,{apply:function(e,t,n){return u(e,j,n)},get:function(e,t){return D(C(t))},defineProperty:function(){return!1},preventExtensions:function(){return!1}}):function(){B.apply=B.apply;for(var e=function(){return B.apply(j,arguments)},t=63;t--;)!function(t){e[t.flags]=function(){return B.apply(t,arguments)}}(C((1&t?"":"d")+(2&t?"":"g")+(4&t?"":"i")+(8&t?"":"m")+(8&t?"":"s")+(16&t?"":"u")+(32&t?"":"y")));return c?c(e):e}(),N="$_"in o?function(){var e=/^/;return e.test=e.test,function(t){return e.test(""),t}}():function(e){return e};const E=[];let P="",K=E,R=-1,W=-1;const H=e=>{throw e},q=/\r?\n/,Y=(e,n)=>{if("string"!=typeof n)throw t("TOML.parse(,,,,sourcePath)");P=n,K=e.split(q),R=K.length-1,W=-1};class z{lineIndex=W;type;restColumn;constructor(e,t){return this.type=e,this.restColumn=t,this}must(){return W===R&&H(l(`${this.type} is not close until the end of the file`+Z(", which started from ",this.lineIndex,K[this.lineIndex].length-this.restColumn+1))),K[++W]}nowrap(){H(e("TOML.parse(,,multilineStringJoiner) must be passed, while the source including multi-line string"+Z(", which started from ",this.lineIndex,K[this.lineIndex].length-this.restColumn+1)))}}const Z=(e,t=W,n=0)=>K===E?"":P?`\n    at (${P}:${t+1}:${n})`:`${e}line ${t+1}: ${K[t]}`,J=()=>{P="",K=E},V=RangeError,G=BigInt,X=WeakMap,Q=WeakMap.prototype.get,ee=WeakMap.prototype.set,te=Number.isSafeInteger,ne=Reflect.ownKeys,ie=WeakSet,re=WeakSet.prototype.has,se=WeakSet.prototype.add,ae=WeakSet.prototype.delete,le=Object.keys,oe=Object.getOwnPropertySymbols,ce=function(){var e=Object.assign||function(e,t){var n,i,r;for(n=le(t),i=0;i<n.length;++i)e[r=n[i]]=t[r];if(oe)for(n=oe(t),i=0;i<n.length;++i)O(t,r=n[i])&&([r]=t[r]);return e};function t(e){return delete e.prototype.constructor,c(e.prototype),e}var n=function(n){return n===i?this:"function"==typeof n?t(n):e(I(d),n)};return delete n.name,n.prototype=null,c(n),n}(),ue=Object.is,fe=Object.fromEntries,he=Reflect.construct,de=Reflect.defineProperty,pe=Reflect.deleteProperty,ge=x.call.bind(x),be=()=>{const e=new X;return e.has=e.has,e.get=e.get,e.set=e.set,e},ye=be(),we=be(),me=be(),xe=n(h(d),{defineProperty:(e,t,i)=>{if(ge(e,t))return de(e,t,n(h(d),i));if(de(e,t,n(h(d),i))){const n=ye.get(e);return n[n.length]=t,!0}return!1},deleteProperty:(e,t)=>{if(pe(e,t)){const n=ye.get(e),i=n.indexOf(t);return i<0||--n.copyWithin(i,i+1).length,!0}return!1},ownKeys:e=>ye.get(e),construct:(e,t,n)=>Oe(he(e,t,n)),apply:(e,t,n)=>Oe(u(e,t,n))}),Te=(e,t)=>{ye.set(e,t);const n=new f(e,xe);return we.set(n,e),n},Oe=e=>{if(we.has(e))return e;let t=me.get(e);return t||(t=Te(e,n([],ne(e))),me.set(e,t),t)},Se=function(){function e(){throw t("Super constructor Null cannot be invoked with 'new'")}function i(){throw t("Super constructor Null cannot be invoked without 'new'")}const r=e=>(delete e.prototype.constructor,c(e.prototype),e);function s(t){return new.target?new.target===s?e():Te(this,[]):"function"==typeof t?r(t):i()}return s.prototype=null,g(s,"name",n(h(d),{value:"",configurable:!1})),c(s),s}(),Ie=WeakMap.prototype.has,ve=new X,$e=Ie.bind(ve),Me=Q.bind(ve),Fe=ee.bind(ve),Le=new ie,ke=re.bind(Le),Ue=se.bind(Le),Ae=new ie,Be=se.bind(Ae),De=re.bind(Ae),Ce=new ie,je=se.bind(Ce),_e=ae.bind(Ce),Ne=!0,Ee=!1,Pe=new ie,Ke=se.bind(Pe),Re=re.bind(Pe),We=ce(class extends ce{constructor(e,t){return super(),Be(this),e?t?Fe(this,!0):Ue(this):(t?Ke:je)(this),this}}),He=ce(class extends Se{constructor(e,t){return super(),Be(this),e?t?Fe(this,!0):Ue(this):(t?Ke:je)(this),this}}),qe=/[ \t]/,Ye=(()=>_`
	^${qe}+`)(),ze=(()=>_.s`
	^
	(
		(?:\d\d\d\d-\d\d-\d\d \d)?
		[\w\-+.:]+
	)
	${qe}*
	(.*)
	$`.exec)(),Ze=(()=>_.s`
	^
	'([^']*)'
	${qe}*
	(.*)`.exec)(),Je=(()=>_.s`
	^
	(.*?)
	'''('{0,2})
	${qe}*
	(.*)`.exec)(),Ve=(()=>_.s`
	^
	(.*?)
	'''()
	${qe}*
	(.*)`.exec)();let Ge=Ve;const Xe=(()=>_.s`
	^
	.
	${qe}*`)(),Qe=/[^\x00-\x1F"#'()<>[\\\]`{}\x7F]+/,et=(()=>_.s`
	^
	${qe}*
	=
	${qe}*
	(?:
		<(${Qe})>
		${qe}*
	)?
	(.*)
	$`.exec)(),tt=(()=>_.s`
	^
	<(${Qe})>
	${qe}*
	(.*)
	$`.exec)(),nt=(()=>_.s`
	^
	<(${Qe})>
	${qe}*
	(.*)
	$`.exec)(),it=F(/(?:[^\\"]+|\\.|""?(?!")){1,10}/ys),rt=e=>{let t=it.lastIndex=0;for(;it.test(e);)t=it.lastIndex;return e.slice(0,t)},st=/[^\\\x00-\x08\x0B-\x1F\x7F]+|\\(?:[btnfr"\\]|[\t ]*\n[\t\n ]*|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/g,at=/[^\\\x00-\x09\x0B-\x1F\x7F]+|\\(?:[btnfr"\\]| *\n[\n ]*|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/g,lt=/[^\\\x00-\x09\x0B-\x1F]+|\\(?:[btnfr"\\]|\n[\n ]*|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/g,ot=/[^\\\x00-\x09\x0B-\x1F]+|\\(?:[btnfr"\\/]|\n[\n ]*|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/g;let ct=st;const ut=e=>!e.replace(ct,""),ft=F(/(?:[^\\"\x00-\x08\x0B-\x1F\x7F]+|\\(?:[btnfr"\\]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})){1,10}/y),ht=F(/(?:[^\\"\x00-\x09\x0B-\x1F\x7F]+|\\(?:[btnfr"\\]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})){1,10}/y),dt=F(/(?:[^\\"\x00-\x09\x0B-\x1F]+|\\(?:[btnfr"\\]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})){1,10}/y),pt=F(/(?:[^\\"\x00-\x09\x0B-\x1F]+|\\(?:[btnfr"\\/]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})){1,10}/y);let gt=pt;const bt=e=>{let t=gt.lastIndex=1;for(;gt.test(e);)t=gt.lastIndex;return t!==e.length&&'"'===e[t]||H(l("Bad basic string"+Z(" at "))),e.slice(1,t)},yt=(()=>F(/^[ \t]*\./).test)(),wt=/^[ \t]*\.[ \t]*/,mt=(()=>F(/^[\w-]+/).exec)(),xt=(()=>F(/^[^ \t#=[\]'".]+(?:[ \t]+[^ \t#=[\]'".]+)*/).exec)();let Tt=xt;const Ot=(()=>F(/^'[^'\x00-\x08\x0B-\x1F\x7F]*'/).exec)(),St=(()=>F(/^'[^'\x00-\x08\x0B-\x1F]*'/).exec)();let It=St,vt=!0;const $t=(e,t)=>{const n="["===e[1];n?(vt||H(l("Array of Tables is not allowed before TOML v0.2"+Z(", which at "))),e=e.slice(2)):e=e.slice(1),e=e.replace(Ye,"");const{leadingKeys:i,finalKey:r}=({lineRest:e}=t(e));let s;return(e=e.replace(Ye,""))&&"]"===e[0]||H(l("Table header is not closed"+Z(", which is found at "))),(e.length>1?"]"===e[1]===n:!n)||H(l("Square brackets of Table definition statement not match"+Z(" at "))),(e=e.slice(n?2:1).replace(Ye,""))&&"<"===e[0]?({1:s,2:e}=nt(e)??H(l("Bad tag"+Z(" at ")))):s="",{leadingKeys:i,finalKey:r,asArrayItem:n,tag:s,lineRest:e}},Mt=(()=>F(/[\x00-\x08\x0B-\x1F\x7F]/).test)(),Ft=(()=>F(/[\x00-\x08\x0B-\x1F]/).test)();let Lt=Mt;const kt=(()=>_`
	(?:
		0
		(?:
			b[01][_01]*
		|
			o[0-7][_0-7]*
		|
			x[\dA-Fa-f][_\dA-Fa-f]*
		|
			(?:\.\d[_\d]*)?(?:[Ee]-?\d[_\d]*)?
		)
	|
		[1-9][_\d]*
		(?:\.\d[_\d]*)?(?:[Ee]-?\d[_\d]*)?
	|
		inf
	|
		nan
	)
`)(),Ut=(()=>_`
	^(?:
		-?${kt}
		(?:-${kt})*
	|
		true
	|
		false
	)$
`.test)(),At=(()=>_`_(?![\dA-Fa-f])`.test)(),Bt=e=>Ut(e)&&!At(e);let Dt,Ct,jt,_t,Nt,Et,Pt,Kt,Rt,Wt,Ht,qt,Yt,zt=null,Zt=!0,Jt=0n,Vt=0n;const Gt=new X,Xt=Q.bind(Gt),Qt=ee.bind(Gt),en=()=>{const e=n=>{const i=Xt(n);return i?i===e||H(t("Types in Array must be same"+Z(". Check "))):Qt(n,e),n};return e},tn={asNulls:en(),asStrings:en(),asTables:en(),asArrays:en(),asBooleans:en(),asFloats:en(),asIntegers:en(),asOffsetDateTimes:en(),asLocalDateTimes:en(),asLocalDates:en(),asLocalTimes:en()},nn=e=>e;let rn,sn,an,ln,on,cn,un,fn,hn,dn,pn,gn=null,bn=[],yn=0;const wn=(e,t,n,i)=>{const r=h(d);r.tag=e,n&&(r.table=n,r.key=i),t&&(r.array=t,r.index=t.length),bn[yn++]=r},mn=()=>{throw H(l("xOptions.tag is not enabled, but found tag syntax"+Z(" at ")))};let xn=mn;const Tn=Symbol("previous"),On=e=>{let t=e,n=t.next();if(!n.done)for(n.value[Tn]=t,n=(t=n.value).next();;)if(n.done){if(t===e)break;t=t[Tn],n=t.next(n.value)}else n.value[Tn]=t,n=(t=n.value).next();return n.value},Sn=new ie,In=se.bind(Sn),vn=re.bind(Sn),$n=new ie,Mn=se.bind($n),Fn=re.bind($n),Ln=e=>{const t=[];return In(t),e&&Mn(t),t},kn=Date,Un=Date.parse,An=Object.preventExtensions,Bn=e=>(c(c(e).prototype),e),Dn=/(?:0[1-9]|1\d|2\d)/,Cn=/(?:0[1-9]|[12]\d|30)/,jn=/(?:0[1-9]|[12]\d|3[01])/,_n=/(?:[01]\d|2[0-3])/,Nn=/[0-5]\d/,En=(()=>_`
	\d\d\d\d-
	(?:
		0
		(?:
			[13578]-${jn}
			|
			[469]-${Cn}
			|
			2-${Dn}
		)
		|
		1
		(?:
			[02]-${jn}
			|
			1-${Cn}
		)
	)
`)(),Pn=(()=>_`
	${_n}:${Nn}:${Nn}
`)(),Kn=/(?:Z|[+-]\d\d:\d\d)$/,Rn=(()=>F(/(([+-])\d\d):(\d\d)$/).exec)(),Wn=(()=>_`
	^
	${En}
	[T ]
	${Pn}
	(?:\.\d{1,3}(\d*?)0*)?
	(?:Z|[+-]${_n}:${Nn})
	$`.exec)(),Hn=(()=>_`
	^
	${En}
	[T ]
	${Pn}
	()
	Z
	$`.exec)(),qn=(()=>_`
	^
	${En}
	[T ]
	${Pn}
	(?:\.\d+)?
	$`.test)(),Yn=(()=>_`
	^
	${En}
	$`.test)(),zn=(()=>_`
	^
	${Pn}
	(?:\.\d+)?
	$`.test)(),Zn=/\.?0+$/,Jn=/[-T:.]/g,Vn=/(?<=\.\d*)0+$/,Gn=(()=>{const e=function(){return this},t=ce(null);{const e=ce(null);for(const n of ne(kn.prototype))"constructor"===n||"toJSON"===n||(t[n]=e)}return e.prototype=An(h(kn.prototype,t)),c(e)})(),Xn=e=>e.replace(Vn,"").replace(Jn,""),Qn=e=>"02-29"!==e.slice(5,10)||+e.slice(0,4)%4==0&&"00"!==e.slice(2,4),ei=new kn(0),ti=Symbol("OffsetDateTime_ISOString"),ni=Symbol("OffsetDateTime_value"),ii=(e,t=0)=>(ei.setTime(+e[ni]+t),ei),ri=(e,t,n)=>+e[ti].slice(t,n),si=(e,t,n,i)=>{n&&(e[ti]=e[ti].slice(0,t)+(""+i).padStart(n-t,"0")+e[ti].slice(n));const r=Un(e[ti]);return e[ni]=(""+r).padStart(15,"0")+e[ni].slice(15),r},ai=Bn(class extends Gn{[ti];[ni];valueOf(){return this[ni]}toISOString(){return this[ti]}constructor(e){const{1:t}=Qn(e)&&(Ct?Hn:Wn)(e)||H(l(`Invalid Offset Date-Time ${e}`+Z(" at ")));return super(),this[ti]=e.replace(" ","T"),this[ni]=(""+Un(this[ti])).padStart(15,"0")+(t?"."+t:""),this}getUTCFullYear(){return ii(this).getUTCFullYear()}getFullYear(){return ri(this,0,4)}setFullYear(e){return si(this,0,4,e)}getUTCMonth(){return ii(this).getUTCMonth()}getMonth(){return ri(this,5,7)-1}setMonth(e){return si(this,5,7,e+1)}getUTCDate(){return ii(this).getUTCDate()}getDate(){return ri(this,8,10)}setDate(e){return si(this,8,10,e)}getUTCHours(){return ii(this).getUTCHours()}getHours(){return ri(this,11,13)}setHours(e){return si(this,11,13,e)}getUTCMinutes(){return ii(this).getUTCMinutes()}getMinutes(){return ri(this,14,16)}setMinutes(e){return si(this,14,16,e)}getUTCSeconds(){return ii(this).getUTCSeconds()}getSeconds(){return ri(this,17,19)}setSeconds(e){return si(this,17,19,e)}getUTCMilliseconds(){return ii(this).getUTCMilliseconds()}getMilliseconds(){return+this[ni].slice(12,15)}setMilliseconds(e){return this[ti]=this[ti].slice(0,19)+(e?("."+(""+e).padStart(3,"0")).replace(Zn,""):"")+this[ti].slice(this[ti].search(Kn)),si(this,0,0,0)}getUTCDay(){return ii(this).getUTCDay()}getDay(){return ii(this,6e4*this.getTimezoneOffset()).getUTCDay()}getTimezoneOffset(){const e=Rn(this[ti]);return e?60*+e[1]+ +(e[2]+e[3]):0}setTimezoneOffset(e){let t=ii(this,6e4*(e=+e)).toISOString().slice(0,-1);if(e){e>0?t+="+":(t+="-",e=-e);const n=e%60,i=(e-n)/60;this[ti]=t+(i>9?i:"0"+i)+(n>9?":"+n:":0"+n)}else this[ti]=t+(ue(e,0)?"Z":"-00:00")}getTime(){return+this[ni].slice(0,15)}setTime(e){e=ei.setTime(e);const t=Rn(this[ti]);return ei.setTime(e+6e4*(t?60*+t[1]+ +(t[2]+t[3]):0)),this[ti]=t?ei.toISOString().slice(0,-1)+t[0]:ei.toISOString(),this[ni]=(""+e).padStart(15,"0"),e}}),li=Symbol("LocalDateTime_ISOString"),oi=Symbol("LocalDateTime_value"),ci=(e,t,n)=>+e[li].slice(t,n),ui=(e,t,n,i)=>{e[oi]=Xn(e[li]=e[li].slice(0,t)+(""+i).padStart(n-t,"0")+e[li].slice(n))},fi=Bn(class extends Gn{[li];[oi];valueOf(){return this[oi]}toISOString(){return this[li]}constructor(e){return qn(e)&&Qn(e)||H(l(`Invalid Local Date-Time ${e}`+Z(" at "))),super(),this[oi]=Xn(this[li]=e.replace(" ","T")),this}getFullYear(){return ci(this,0,4)}setFullYear(e){return ui(this,0,4,e)}getMonth(){return ci(this,5,7)-1}setMonth(e){return ui(this,5,7,e+1)}getDate(){return ci(this,8,10)}setDate(e){return ui(this,8,10,e)}getHours(){return ci(this,11,13)}setHours(e){return ui(this,11,13,e)}getMinutes(){return ci(this,14,16)}setMinutes(e){return ui(this,14,16,e)}getSeconds(){return ci(this,17,19)}setSeconds(e){return ui(this,17,19,e)}getMilliseconds(){return+this[oi].slice(14,17).padEnd(3,"0")}setMilliseconds(e){this[oi]=Xn(this[li]=this[li].slice(0,19)+(e?("."+(""+e).padStart(3,"0")).replace(Zn,""):""))}}),hi=Symbol("LocalDate_ISOString"),di=Symbol("LocalDate_value"),pi=(e,t,n)=>+e[hi].slice(t,n),gi=(e,t,n,i)=>{e[di]=Xn(e[hi]=e[hi].slice(0,t)+(""+i).padStart(n-t,"0")+e[hi].slice(n))},bi=Bn(class extends Gn{[hi];[di];valueOf(){return this[di]}toISOString(){return this[hi]}constructor(e){return Yn(e)&&Qn(e)||H(l(`Invalid Local Date ${e}`+Z(" at "))),super(),this[di]=Xn(this[hi]=e),this}getFullYear(){return pi(this,0,4)}setFullYear(e){return gi(this,0,4,e)}getMonth(){return pi(this,5,7)-1}setMonth(e){return gi(this,5,7,e+1)}getDate(){return pi(this,8,10)}setDate(e){return gi(this,8,10,e)}}),yi=Symbol("LocalTime_ISOString"),wi=Symbol("LocalTime_value"),mi=(e,t,n)=>+e[yi].slice(t,n),xi=(e,t,n,i)=>{e[wi]=Xn(e[yi]=e[yi].slice(0,t)+(""+i).padStart(2,"0")+e[yi].slice(n))},Ti=Bn(class extends Gn{[yi];[wi];valueOf(){return this[wi]}toISOString(){return this[yi]}constructor(e){return zn(e)||H(l(`Invalid Local Time ${e}`+Z(" at "))),super(),this[wi]=Xn(this[yi]=e),this}getHours(){return mi(this,0,2)}setHours(e){return xi(this,0,2,e)}getMinutes(){return mi(this,3,5)}setMinutes(e){return xi(this,3,5,e)}getSeconds(){return mi(this,6,8)}setSeconds(e){return xi(this,6,8,e)}getMilliseconds(){return+this[wi].slice(6,9).padEnd(3,"0")}setMilliseconds(e){this[wi]=Xn(this[yi]=this[yi].slice(0,8)+(e?("."+(""+e).padStart(3,"0")).replace(Zn,""):""))}}),Oi=parseInt,Si=String.fromCodePoint,Ii=/[^\\]+|\\(?:[\\"btnfr/]|u.{4}|U.{8})/gs,vi=/[^\n\\]+|\n|\\(?:[\t ]*\n[\t\n ]*|[\\"btnfr/]|u.{4}|U.{8})/gs,$i=e=>{if(!e)return"";const t=e.match(Ii),{length:n}=t;let i=0;do{const e=t[i];if("\\"===e[0])switch(e[1]){case"\\":t[i]="\\";break;case'"':t[i]='"';break;case"b":t[i]="\b";break;case"t":t[i]="\t";break;case"n":t[i]="\n";break;case"f":t[i]="\f";break;case"r":t[i]="\r";break;case"u":const n=Oi(e.slice(2),16);55295<n&&n<57344&&H(V(`Invalid Unicode Scalar ${e}`+Z(" at "))),t[i]=w(n);break;case"U":const r=Oi(e.slice(2),16);(55295<r&&r<57344||1114111<r)&&H(V(`Invalid Unicode Scalar ${e}`+Z(" at "))),t[i]=Si(r);break;case"/":t[i]="/"}}while(++i!==n);return t.join("")},Mi=(e,t,n)=>{if(!e)return"";const i=e.match(vi),{length:r}=i;let s=0;do{const e=i[s];if("\n"===e)++n,i[s]=t;else if("\\"===e[0])switch(e[1]){case"\n":case" ":case"\t":for(let i=0;i=e.indexOf("\n",i)+1;)++n;i[s]="";break;case"\\":i[s]="\\";break;case'"':i[s]='"';break;case"b":i[s]="\b";break;case"t":i[s]="\t";break;case"n":i[s]="\n";break;case"f":i[s]="\f";break;case"r":i[s]="\r";break;case"u":const t=Oi(e.slice(2),16);55295<t&&t<57344&&H(V(`Invalid Unicode Scalar ${e}`+Z(" at ",W+n))),i[s]=w(t);break;case"U":const r=Oi(e.slice(2),16);(55295<r&&r<57344||1114111<r)&&H(V(`Invalid Unicode Scalar ${e}`+Z(" at ",W+n))),i[s]=Si(r);break;case"/":i[s]="/"}}while(++s!==r);return i.join("")},Fi=/[-+]?(?:0|[1-9][_\d]*)/,Li=(()=>_`_(?!\d)`.test)(),ki=(()=>_`^${Fi}$`.test)(),Ui=(()=>F(/^0(?:x[\dA-Fa-f][_\dA-Fa-f]*|o[0-7][_0-7]*|b[01][_01]*)$/).test)(),Ai=(()=>_`_(?![\dA-Fa-f])`.test)(),Bi=/_|^[-+]/g,Di=e=>(ki(e)||Ui(e))&&!Ai(e),Ci=e=>{Di(e)||H(l(`Invalid Integer ${e}`+Z(" at ")));let t=G(e.replace(Bi,""));return"-"===e[0]&&(t=-t),Rt||-9223372036854775808n<=t&&t<=9223372036854775807n||H(V(`Integer expect 64 bit range (-9,223,372,036,854,775,808 to 9,223,372,036,854,775,807), not includes ${e}`+Z(" meet at "))),t},ji=e=>{if(!0===Zt)return Ci(e);if(!1===Zt)return(e=>{Di(e)||H(l(`Invalid Integer ${e}`+Z(" at ")));const t="-"===e[0]?-e.replace(Bi,""):+e.replace(Bi,"");return te(t)||H(V(`Integer did not use BitInt must fit Number.isSafeInteger, not includes ${e}`+Z(" meet at "))),t})(e);const t=Ci(e);return Jt<=t&&t<=Vt?+(t+""):t},_i=isFinite,Ni=(()=>_`
	^
	${Fi}
	(?:
		\.\d[_\d]*
		(?:[eE][-+]?\d[_\d]*)?
	|
		[eE][-+]?\d[_\d]*
	)
	$`.test)(),Ei=/_/g,Pi=(()=>F(/^[-+]?0(?:\.[0_]+)?(?:[eE][-+]?0+)?$/).test)(),Ki=e=>{Ni(e)&&!Li(e)||H(l(`Invalid Float ${e}`+Z(" at ")));const t=+e.replace(Ei,"");return Et&&(_i(t)||H(V(`Float has been as big as inf, like ${e}`+Z(" at "))),t||Pi(e)||H(V(`Float has been as little as ${"-"===e[0]?"-":""}0, like ${e}`+Z(" at ")))),t},Ri=(t,n)=>{const{length:i}=n;let r=0;for(;r<i;){const s=n[r++];if(!(s in t)){for(t=t[s]=new Kt(Ee);r<i;)t=t[n[r++]]=new Kt(Ee);return t}De(t=t[s])?$e(t)&&H(e("Trying to define Table under Inline Table"+Z(" at "))):vn(t)?(Fn(t)&&H(e("Trying to append value to Static Array"+Z(" at "))),t=t[t.length-1]):H(e("Trying to define Table under non-Table value"+Z(" at ")))}return t},Wi=(t,n,i,r)=>{let s;if(i){let i;n in t?vn(i=t[n])&&!Fn(i)||H(e("Trying to push Table to non-ArrayOfTables value"+Z(" at "))):i=t[n]=Ln(!1),r&&xn(r,i,t,n),i[i.length]=s=new Kt(Ne)}else n in t?(s=t[n],(e=>!!_e(e)&&(Ue(e),!0))(s)||H(e("Duplicate Table definition"+Z(" at "))),Re(s)&&H(e("A table defined implicitly via key/value pair can not be accessed to via []"+Z(", which at ")))):t[n]=s=new Kt(Ne),r&&xn(r,null,t,n);return s},Hi=(t,n)=>{const{length:i}=n;let r=0;for(;r<i;){const s=n[r++];if(!(s in t)){for(t=t[s]=new Kt(Ee,!0);r<i;)t=t[n[r++]]=new Kt(Ee,!0);return t}De(t=t[s])||H(e("Trying to assign property through non-Table value"+Z(" at "))),$e(t)&&H(e("Trying to assign property through static Inline Table"+Z(" at "))),Re(t)||H(e("A table defined implicitly via [] can not be accessed to via key/value pair"+Z(", which at ")))}return t},qi=e=>(Lt(e)&&H(l("Control characters other than Tab are not permitted in a Literal String"+Z(", which was found at "))),e),Yi=(e,t,n)=>{if("'"!==n[1]||"'"!==n[2]){const i=Ze(n)??H(l("Bad literal string"+Z(" at ")));return e[t]=qi(i[1]),i[2]}n=n.slice(3);const i=Ge(n);if(i)return e[t]=qi(i[1])+i[2],i[3];const r=new z("Multi-line Literal String",n.length+3);if(!n){n=r.must();const i=Ge(n);if(i)return e[t]=qi(i[1])+i[2],i[3]}zt??r.nowrap();for(const s=[qi(n)];;){const n=r.must(),i=Ge(n);if(i)return s[s.length]=qi(i[1])+i[2],e[t]=s.join(zt),i[3];s[s.length]=qi(n)}},zi=(e,t,n)=>{if('"'!==n[1]||'"'!==n[2]){const i=bt(n);return e[t]=$i(i),n.slice(2+i.length).replace(Ye,"")}n=n.slice(3);const i=rt(n);let{length:r}=i;if(n.startsWith('"""',r))return ut(i)||H(l("Bad multi-line basic string"+Z(" at "))),r+=3,e[t]=$i(i)+(Dt&&'"'===n[r]?'"'===n[++r]?(++r,'""'):'"':""),n.slice(r).replace(Ye,"");const s=new z("Multi-line Basic String",n.length+3),a=n?0:1;if(a){n=s.must();const i=rt(n);let{length:r}=i;if(n.startsWith('"""',r))return ut(i)||H(l("Bad multi-line basic string"+Z(" at "))),r+=3,e[t]=Mi(i,zt,a)+(Dt&&'"'===n[r]?'"'===n[++r]?(++r,'""'):'"':""),n.slice(r).replace(Ye,"")}zt??s.nowrap(),ut(n+="\n")||H(l("Bad multi-line basic string"+Z(" at ")));for(const o=[n];;){let n=s.must();const i=rt(n);let{length:r}=i;if(n.startsWith('"""',r))return ut(i)||H(l("Bad multi-line basic string"+Z(" at "))),r+=3,e[t]=Mi(o.join("")+i,zt,a)+(Dt&&'"'===n[r]?'"'===n[++r]?(++r,'""'):'"':""),n.slice(r).replace(Ye,"");ut(n+="\n")||H(l("Bad multi-line basic string"+Z(" at "))),o[o.length]=n}},Zi=Symbol,Ji=ce(null),Vi=e=>Ji[e]??(e=>{const t=Zi(e);return Ji[t]=e,Ji[e]=t})(e),Gi=/\r?\n/g,Xi=(e,n)=>{if(n in Ji&&Ji[n]in e){const i=e[Ji[n]];if("string"==typeof i)return" #"+i.replace(Gi,"");throw t(`the value of commentKey must be "string" type, while "${null===i?"null":typeof i}" is found`)}return""},Qi=(()=>F(Kn).test)(),er=e=>{let t=e;const n=[];let i=-1;for(;;){if(t||H(l("Empty bare key"+Z(" at "))),'"'===t[0]){const e=bt(t);t=t.slice(2+e.length),n[++i]=$i(e)}else{const e="'"===t[0],r=((e?It:Tt)(t)??H(l(`Bad ${e?"literal string":"bare"} key`+Z(" at "))))[0];t=t.slice(r.length),n[++i]=e?r.slice(1,-1):r}if(!yt(t))break;t=t.replace(wt,"")}if(Yt){const n=e.slice(0,-t.length);(Bt(n)||Wt&&"null"===n)&&H(l("Bad bare key disabled by xOptions.string"+Z(" at ")))}if(Nt){let e=i;do{n[e]||H(l("Empty key is not allowed before TOML v0.5"+Z(", which at ")))}while(e--)}const r=n[i];return n.length=i,{leadingKeys:n,finalKey:r,lineRest:t}},tr=(e,t)=>{if("<"===t[0]){const{1:n}=({2:t}=tt(t)??H(l("Bad tag "+Z(" at "))));switch(xn(n,e,null),t&&t[0]){case",":case"]":case"":case"#":return e[e.length]=i,t}}switch(t[0]){case"'":return Yi(sn(e),e.length,t);case'"':return zi(sn(e),e.length,t);case"{":return jt||H(l("Inline Table is not allowed before TOML v0.4"+Z(", which at "))),ir(an(e),e.length,t);case"[":return nr(ln(e),e.length,t)}const{1:n}=({2:t}=ze(t)??H(l("Bad atom value"+Z(" at "))));if(Pt){if("inf"===n||"+inf"===n)return cn(e)[e.length]=y,t;if("-inf"===n)return cn(e)[e.length]=-1/0,t;if("nan"===n||"+nan"===n||"-nan"===n)return cn(e)[e.length]=NaN,t}return n.includes(":")?(n.includes("-")?Qi(n)?fn(e)[e.length]=new ai(n):(_t||H(l("Local Date-Time is not allowed before TOML v0.5"+Z(", which at "))),hn(e)[e.length]=new fi(n)):(_t||H(l("Local Time is not allowed before TOML v0.5"+Z(", which at "))),pn(e)[e.length]=new Ti(n)),t):n.indexOf("-")!==n.lastIndexOf("-")&&"-"!==n[0]?(_t||H(l("Local Date is not allowed before TOML v0.5"+Z(", which at "))),dn(e)[e.length]=new bi(n),t):("true"===n?on(e)[e.length]=!0:"false"===n?on(e)[e.length]=!1:n.includes(".")||(n.includes("e")||n.includes("E"))&&!n.startsWith("0x")?cn(e)[e.length]=Ki(n):Wt&&"null"===n?rn(e)[e.length]=null:un(e)[e.length]=ji(n),t)},nr=function*(e,t,n){const i=e[t]=Ln(!0),r=new z("Static Array",n.length);n=n.replace(Xe,"");let s=!0;for(;!n||"#"===n[0];)s=!1,n=r.must().replace(Ye,"");if("]"===n[0])return s&&Fe(i,!0),n.replace(Xe,"");for(;;){const e=tr(i,n);for(n="string"==typeof e?e:yield e;!n||"#"===n[0];)s=!1,n=r.must().replace(Ye,"");if(","===n[0]){for(n=n.replace(Xe,"");!n||"#"===n[0];)s=!1,n=r.must().replace(Ye,"");if("]"===n[0])break}else{if("]"===n[0])break;H(l("Unexpect character in static array item value"+Z(", which is found at ")))}}return s&&Fe(i,!0),n.replace(Xe,"")},ir=function*(e,t,n){const i=e[t]=new Kt(Ne,!0);if(Ht){const e=new z("Inline Table",n.length);n=n.replace(Xe,"");let t=!0;for(;;){for(;!n||"#"===n[0];)t=!1,n=e.must().replace(Ye,"");if("}"===n[0])break;const r=rr(i,n),s=sr(r);if(n="string"==typeof s?s:yield s){if("#"===n[0]){qt&&(r.table[Vi(r.finalKey)]=n.slice(1)),t=!1;do{n=e.must().replace(Ye,"")}while(!n||"#"===n[0])}}else{t=!1;do{n=e.must().replace(Ye,"")}while(!n||"#"===n[0])}","===n[0]&&(n=n.replace(Xe,""))}t||Fe(i,!1)}else if("}"!==(n=n.replace(Xe,"")||H(l("Inline Table is intended to appear on a single line"+Z(", which broken at "))))[0])for(;;){"#"===n[0]&&H(l("Inline Table is intended to appear on a single line"+Z(", which broken at ")));const e=sr(rr(i,n));if("}"===(n=("string"==typeof e?e:yield e)||H(l("Inline Table is intended to appear on a single line"+Z(", which broken at "))))[0])break;","===n[0]&&"}"===(n=n.replace(Xe,"")||H(l("Inline Table is intended to appear on a single line"+Z(", which broken at "))))[0]&&H(l("The last property of an Inline Table can not have a trailing comma"+Z(", which was found at ")))}return n.replace(Xe,"")},rr=(e,t)=>{const{leadingKeys:n,finalKey:i,tag:r}=({lineRest:t}=(({leadingKeys:e,finalKey:t,lineRest:n})=>{const{1:i=""}=({2:n}=et(n)??H(l("Keys must equal something"+Z(", but missing at "))));return i||n&&"#"!==n[0]||H(l("Value can not be missing after euqal sign"+Z(", which is found at "))),{leadingKeys:e,finalKey:t,tag:i,lineRest:n}})(er(t)));return{table:Hi(e,n),finalKey:i,tag:r,lineRest:t}},sr=({finalKey:t,tag:n,lineRest:r,table:s})=>{if(t in s&&H(e("Duplicate property definition"+Z(" at "))),n)switch(xn(n,null,s,t),r&&r[0]){case",":case"}":case"":case"#":return s[t]=i,r}switch(r&&r[0]){case"'":return Yi(s,t,r);case'"':return zi(s,t,r);case"{":return jt||H(l("Inline Table is not allowed before TOML v0.4"+Z(", which at "))),ir(s,t,r);case"[":return nr(s,t,r)}const{1:a}=({2:r}=ze(r)??H(l("Bad atom value"+Z(" at "))));if(Pt){if("inf"===a||"+inf"===a)return s[t]=y,r;if("-inf"===a)return s[t]=-1/0,r;if("nan"===a||"+nan"===a||"-nan"===a)return s[t]=NaN,r}return a.includes(":")?(a.includes("-")?Qi(a)?s[t]=new ai(a):(_t||H(l("Local Date-Time is not allowed before TOML v0.5"+Z(", which at "))),s[t]=new fi(a)):(_t||H(l("Local Time is not allowed before TOML v0.5"+Z(", which at "))),s[t]=new Ti(a)),r):a.indexOf("-")!==a.lastIndexOf("-")&&"-"!==a[0]?(_t||H(l("Local Date is not allowed before TOML v0.5"+Z(", which at "))),s[t]=new bi(a),r):(s[t]="true"===a||"false"!==a&&(a.includes(".")||(a.includes("e")||a.includes("E"))&&!a.startsWith("0x")?Ki(a):Wt&&"null"===a?null:ji(a)),r)},ar=Uint8Array,lr="undefined"==typeof Buffer?i:Buffer,or=e=>"byteLength"in e,cr="A TOML doc must be a (ful-scalar) valid UTF-8 file, without any unknown code point.",ur=lr?(({isBuffer:t,[Symbol.species]:n,byteLength:i,allocUnsafe:r})=>s=>{if(!s.byteLength)return"";const a=t(s)?s:"length"in s?new n(s.buffer,s.byteOffset,s.length):new n(s),l=a.toString();if(l.includes("�")){const t=i(l);if(t!==a.length)throw e(cr);const n=r(t);if(n.utf8Write(l,0,t),!n.equals(a))throw e(cr)}return"\ufeff"===l[0]?l.slice(1):l})(lr):t=>{if(!t.byteLength)return"";const n="length"in t?t:new ar(t),{length:i}=n,r=i-1,s=r-1,a=s-1,l=[];let o=0,c=0;do{let t=n[c];if(t<192){if(t<128){l[o++]=w(t),c+=1;continue}}else if(t<224){if(c<r){const e=n[c+1];if(128==(192&e)&&(t=(31&t)<<6|63&e,127<t)){l[o++]=w(t),c+=2;continue}}}else if(t<240){if(c<s){const e=n[c+1],i=n[c+2];if(128==(192&e)&&128==(192&i)&&(t=(15&t)<<12|(63&e)<<6|63&i,(t<55296?2047:57343)<t)){l[o++]=w(t),c+=3;continue}}}else if(c<a){const e=n[c+1],i=n[c+2],r=n[c+3];if(128==(192&e)&&128==(192&i)&&128==(192&r)&&(t=(15&t)<<18|(63&e)<<12|(63&i)<<6|63&r,65535<t&&t<1114112)){l[o++]=Si(t),c+=4;continue}}throw e(cr)}while(c!==i);const u=l.join("");return"\ufeff"===u[0]?u.slice(1):u},fr=(()=>F(/[\uD800-\uDFFF]/u).test)();let hr=!1;const dr=(n,r,s,a,o)=>{if(hr)throw e("parse during parsing.");let c,u;hr=!0;try{let f="";if("object"==typeof n&&n)if(or(n))n=ur(n);else{if(f=n.path,"string"!=typeof f)throw t("TOML.parse(source.path)");const{data:e,require:r=("function"==typeof require?require:i)}=n;if(r){const s=r.resolve?.paths?.("")?.[0]?.replace(/node_modules$/,"");if(s&&(f=r("path").resolve(s,f),"string"!=typeof f))throw t("TOML.parse(source.require('path').resolve)");if(e===i){const e=r("fs").readFileSync(f);if("object"!=typeof e||!e||!or(e))throw t("TOML.parse(source.require('fs').readFileSync)");n=ur(e)}else if("string"==typeof e)n=e;else{if("object"!=typeof e||!e||!or(e))throw t("TOML.parse(source.data)");n=ur(e)}}else{if(e===i)throw t("TOML.parse(source.data|source.require)");if("string"==typeof e)n=e;else{if("object"!=typeof e||!e||!or(e))throw t("TOML.parse(source.data)");n=ur(e)}}}else if("string"!=typeof n)throw t("TOML.parse(source)");try{if(fr(n))throw e("A TOML doc must be a (ful-scalar) valid UTF-8 file, without any uncoupled UCS-4 character code.");if("object"==typeof s&&s){if(a!==i||o!==i)throw t("options mode ? args mode");({joiner:s,bigint:a,x:o}=s)}try{((e,n,r,s)=>{let a;switch(e){case 1:a=Dt=_t=Pt=jt=!0,Ct=Nt=!1;break;case.5:_t=Pt=jt=!0,a=Dt=Ct=Nt=!1;break;case.4:Nt=jt=!0,a=Dt=Ct=_t=Pt=!1;break;case.3:Nt=!0,a=Dt=Ct=_t=Pt=jt=!1;break;case.2:case.1:Ct=Nt=!0,a=Dt=_t=Pt=jt=!1;break;default:throw V("TOML.parse(,specificationVersion)")}if((e=>{switch(e){case 1:Ge=Je,It=Ot,Lt=Mt,ct=st,gt=ft,Tt=mt,vt=!0;break;case.5:Ge=Ve,It=Ot,Lt=Mt,ct=at,gt=ht,Tt=mt,vt=!0;break;case.4:Ge=Ve,It=St,Lt=Ft,ct=lt,gt=dt,Tt=mt,vt=!0;break;default:Ge=Ve,It=St,Lt=Ft,ct=ot,gt=pt,Tt=xt,vt=!1}})(e),"string"==typeof n)zt=n;else{if(n!==i)throw t("TOML.parse(,,multilineStringJoiner)");zt=null}if(r===i||!0===r)Zt=!0;else if(!1===r)Zt=!1;else{if("number"!=typeof r)throw t("TOML.parse(,,,useBigInt)");if(!te(r))throw V("TOML.parse(,,,useBigInt)");Zt=null,r>=0?Jt=-(Vt=G(r)):Vt=-(Jt=G(r))-1n}if(null==s||!1===s)Kt=We,Et=Rt=Wt=Ht=!1,xn=mn;else if(!0===s)Kt=He,Rt=Et=Wt=Ht=!0,xn=mn;else if("function"==typeof s){if(Kt=He,Rt=Et=Wt=Ht=!0,!a)throw t("TOML.parse(,,,,tag) needs at least TOML 1.0 to support mixed type array");gn=s,xn=wn}else{const{order:e,longer:n,exact:i,null:r,multi:l,comment:o,string:c,tag:u,...f}=s;if(ne(f).length)throw t("TOML.parse(,,,,xOptions)");if(Kt=e?He:We,Rt=!!n,Et=!!i,Wt=!!r,Ht=!!l,qt=!!o,Yt=!!c,u){if("function"!=typeof u)throw t("TOML.parse(,,,,xOptions.tag)");if(!a)throw t("TOML.parse(,,,,xOptions) xOptions.tag needs at least TOML 1.0 to support mixed type array");gn=u,xn=wn}else xn=mn}a?rn=sn=an=ln=on=cn=un=fn=hn=dn=pn=nn:({asNulls:rn,asStrings:sn,asTables:an,asArrays:ln,asBooleans:on,asFloats:cn,asIntegers:un,asOffsetDateTimes:fn,asLocalDateTimes:hn,asLocalDates:dn,asLocalTimes:pn}=tn)})(r,s,a,o),Y(n,f);try{n&&"\ufeff"===n[0]&&H(t("TOML content (string) should not start with BOM (U+FEFF)"+Z(" at "))),c=(()=>{const e=new Kt;let t=e;for(;W!==R;){const n=K[++W].replace(Ye,"");if(n)if("["===n[0]){const{leadingKeys:i,finalKey:r,asArrayItem:s,tag:a,lineRest:o}=$t(n,er),c=Ri(e,i);o&&("#"===o[0]?qt&&!s&&(c[Vi(r)]=o.slice(1)):H(l("Unexpect charachtor after table header"+Z(" at ")))),t=Wi(c,r,s,a)}else if("#"===n[0])Lt(n)&&H(l("Control characters other than Tab are not permitted in comments"+Z(", which was found at ")));else{const e=rr(t,n);let i=sr(e);"string"==typeof i||(i=On(i)),i&&("#"===i[0]?qt&&(e.table[Vi(e.finalKey)]=i.slice(1)):H(l("Unexpect charachtor after key/value pair"+Z(" at "))))}}return e})(),u=(()=>{if(yn){let e=yn;const t=gn,n=bn;return bn=[],()=>{do{t(n[--e]),n.length=e}while(e)}}return null})()}finally{J()}}finally{gn=null,bn.length=yn=0,Ct=!1,zt=null}}finally{N()}}finally{hr=!1}return u?.(),c},pr=n(((e,t,n,i,r)=>"number"==typeof t?dr(e,t,n,i,r):dr(e,1,t,n,i)),{"1.0":(e,t,n,i)=>dr(e,.1,t,n,i),1:(e,t,n,i)=>dr(e,1,t,n,i),.5:(e,t,n,i)=>dr(e,.5,t,n,i),.4:(e,t,n,i)=>dr(e,.4,t,n,i),.3:(e,t,n,i)=>dr(e,.3,t,n,i),.2:(e,t,n,i)=>dr(e,.2,t,n,i),.1:(e,t,n,i)=>dr(e,.1,t,n,i)}),gr=Object.getOwnPropertyNames,br=Number.MAX_SAFE_INTEGER,yr=Boolean,wr=String,mr=Number,xr=new ie,Tr=re.bind(xr),Or=se.bind(xr),Sr=ce({...fe([...m(32)].map(((e,t)=>[w(t),"\\u"+t.toString(16).toUpperCase().padStart(4,"0")]))),"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"','"""':'""\\"',"\\":"\\\\","":"\\u007F"}),Ir=(()=>F(/[\x00-\x08\x0A-\x1F'\x7F]/).test)(),vr=/[^\x00-\x08\x0A-\x1F"\\\x7F]+|./gs,$r=(()=>F(/^[\x00-\x08\x0A-\x1F"\\\x7F]/).test)(),Mr=e=>`'${e}'`,Fr=e=>{if(Ir(e)){const t=e.match(vr);let n=t.length;do{$r(t[--n])&&(t[n]=Sr[t[n]])}while(n);return`"${t.join("")}"`}return`'${e}'`},Lr=(()=>F(/[\x00-\x08\x0A-\x1F\x7F]|'''/).test)(),kr=(()=>F(/[\x00-\x08\x0A-\x1F\\\x7F]|"""/).test)(),Ur=/[^\x00-\x08\x0A-\x1F"\\\x7F]+|"""|./gs,Ar=(()=>F(/^(?:[\x00-\x08\x0A-\x1F\\\x7F]|""")/).test)(),Br=(e,t)=>{const n=e[t];if(kr(n)){const i=n.match(Ur);let r=i.length;do{Ar(i[--r])&&(i[r]=Sr[i[r]])}while(r);e[t]=i.join("")}},Dr=e=>(1===(e=["",...e]).length&&(e[1]=""),e),Cr=e=>{const t=e.length-1;let n=t;do{if(Lr(e[n]))break}while(--n);if(n)for(n=t,Br(e,n),e[n]+=e[0]='"""';--n;)Br(e,n);else e[t]+=e[0]="'''";return Or(e),e},jr=(()=>F(/^-?\d+$/).test)(),_r=(()=>F(/^[\w-]+$/).test)(),Nr=e=>_r(e)?e:Fr(e),Er=/[^.]+/,Pr=e=>Bt(e)?e.replace(Er,Mr):"null"===e?"'null'":e;class Kr extends m{document;constructor(e){return super(),this.document=e,this}[Symbol.toPrimitive](){return this.join(this.document.newline)}appendNewline(){this[this.length]=""}set appendLine(e){this[this.length]=e}set appendInline(e){this[this.length-1]+=e}set appendInlineIf(e){e&&(this[this.length-1]+=e)}*assignBlock(e,t,n,i){const{document:r}=this,{newlineUnderHeader:s,newlineUnderSectionButPair:a}=r,l=!!t&&r.newlineUnderPairButDotted,o=t?r.newlineUnderDotted:r.newlineUnderPair;for(const c of i){const i=n[c],u=Nr(c),f=e+u;if(b(i)){if(i.length&&ke(i[0])){const e=`[[${f}]]`,t=f+".";for(const n of i){const i=r.appendSection();i[0]=e,s?(i[1]="",yield i.assignBlock(t,"",n,gr(n)),a&&2!==i.length&&i.appendNewline()):(yield i.assignBlock(t,"",n,gr(n)),a&&i.appendNewline())}continue}}else if(ke(i)){const e=r.appendSection();e[0]=`[${f}]${Xi(n,c)}`,s?(e[1]="",yield e.assignBlock(f+".","",i,gr(i)),a&&2!==e.length&&e.appendNewline()):(yield e.assignBlock(f+".","",i,gr(i)),a&&e.appendNewline());continue}const h=t+u;this.appendLine=Pr(h)+" = ";const d=this.value("",i,gr);d?(--this.length,yield this.assignBlock(f+".",h+".",i,d),l&&this.appendNewline()):(this.appendInlineIf=Xi(n,c),o&&this.appendNewline())}}value(e,n,r){switch(typeof n){case"object":if(null===n){if(this.document.nullDisabled)throw t('toml can not stringify "null" type value without truthy options.xNull');this.appendInline="null";break}if(Tr(n)){const{length:e}=n;this.appendInline=n[0];let t=1;for(;t!==e;)this.appendLine=n[t++];break}const s=Me(n);if(b(n)){s?this.singlelineArray(e,n):this.staticArray(e,n);break}if(s!==i){s||this.document.multilineTableDisabled?this.inlineTable(e,n):this.multilineTable(e,n,this.document.multilineTableComma);break}if(n instanceof kn){this.appendInline=this.document._?n.toISOString().replace("T"," "):n.toISOString();break}if(n instanceof wr)throw t("TOML.stringify refuse to handle [object String]");if(r){const e=r(n);if(e.length)return e;this.appendInline="{ }";break}if(n instanceof G)throw t("TOML.stringify refuse to handle [object BigInt]");if(n instanceof mr)throw t("TOML.stringify refuse to handle [object Number]");if(n instanceof yr)throw t("TOML.stringify refuse to handle [object Boolean]");if(n instanceof Zi)throw t("TOML.stringify refuse to handle [object Symbol]");this.inlineTable(e,n);break;case"bigint":this.appendInline=""+n;break;case"number":this.appendInline=this.document.asInteger(n)?ue(n,-0)?"-0":""+n:(e=>{return e?e===y?"inf":e===-1/0?"-inf":jr(t=""+e)?t+".0":t:e==e?ue(e,0)?"0.0":"-0.0":"nan";var t})(n);break;case"string":this.appendInline=Fr(n);break;case"boolean":this.appendInline=n?"true":"false";break;default:throw t(`toml can not stringify "${typeof n}" type value`)}return null}singlelineArray(e,t){const{length:n}=t;if(n){this.appendInline="[ ",this.value(e,t[0]);let i=1;for(;i!==n;)this.appendInline=", ",this.value(e,t[i++]);this.appendInline=" ]"}else this.appendInline="[ ]"}staticArray(e,t){this.appendInline="[";const n=e+this.document.indent;for(const i of t)this.appendLine=n,this.value(n,i),this.appendInline=",";this.appendLine=e+"]"}inlineTable(e,t){const n=gr(t);n.length?(this.appendInline="{ ",this.assignInline(e,t,"",n),this[this.length-1]=this[this.length-1].slice(0,-2)+" }"):this.appendInline="{ }"}multilineTable(e,t,n){this.appendInline="{",this.assignMultiline(e,t,"",gr(t),n),this.appendLine=e+"}"}assignInline(e,t,n,i){for(const r of i){const i=t[r],s=n+Nr(r),a=this.appendInline=Pr(s)+" = ",l=this.value(e,i,gr);l?(this[this.length-1]=this[this.length-1].slice(0,-a.length),this.assignInline(e,i,s+".",l)):this.appendInline=", "}}assignMultiline(e,t,n,i,r){const s=e+this.document.indent;for(const a of i){const i=t[a],l=n+Nr(a);this.appendLine=s+Pr(l)+" = ";const o=this.value(s,i,gr);o?(--this.length,this.assignMultiline(e,i,l+".",o,r)):r?this.appendInline=","+Xi(t,a):this.appendInlineIf=Xi(t,a)}}}const Rr=ce({document:0,section:1,header:2,pairs:3,pair:4}),Wr=(()=>F(/^[\t ]*$/).test)(),Hr=()=>!1;class qr extends m{get["constructor"](){return m}0=new Kr(this);asInteger;newline;newlineUnderSection;newlineUnderSectionButPair;newlineUnderHeader;newlineUnderPair;newlineUnderPairButDotted;newlineUnderDotted;indent;_;nullDisabled;multilineTableDisabled;multilineTableComma;constructor(e){super();const n=e?.integer;if(void 0===n)this.asInteger=Hr;else if(n===br)this.asInteger=te;else{if("number"!=typeof n)throw t("TOML.stringify(,{integer}) can only be number");{if(!te(n))throw V("TOML.stringify(,{integer}) can only be a safe integer");const e=n>=0?n:-n-1,t=n>=0?-n:n;this.asInteger=n=>te(n)&&t<=n&&n<=e}}const i=e?.newline;if(void 0!==i&&"\n"!==i&&"\r\n"!==i)throw"string"==typeof i?l("TOML.stringify(,{newline}) can only be valid TOML newline"):t("TOML.stringify(,{newline}) can only be string");this.newline=i??"";const r=Rr[e?.newlineAround??"header"]??Rr.header;this.newlineUnderSection=r>0,this.newlineUnderSectionButPair=1===r||2===r,this.newlineUnderHeader=r>1,this.newlineUnderPair=r>2,this.newlineUnderPairButDotted=3===r,this.newlineUnderDotted=r>3;const s=e?.indent;if(void 0===s)this.indent="\t";else if("string"==typeof s){if(!Wr(s))throw l("TOML.stringify(,{indent}) can only include Tab or Space");this.indent=s}else{if("number"!=typeof s)throw t(`TOML.stringify(,{indent}) can not be "${typeof s}" type`);if(!te(s))throw V(`TOML.stringify(,{indent:${s}}) is out of range`);this.indent=" ".repeat(s)}this._=" "===e?.T,this.nullDisabled=!e?.xNull;const a=e?.xBeforeNewlineInMultilineTable;return""===a?(this.multilineTableDisabled=!1,this.multilineTableComma=!1):","===a?(this.multilineTableDisabled=!1,this.multilineTableComma=!0):(this.multilineTableDisabled=!0,this.multilineTableComma=!0),this}appendSection(){return this[this.length]=new Kr(this)}}return v({version:"1.21.0",parse:pr,stringify:(e,t)=>{const n=new qr(t),i=n[0];return i[0]="",On(i.assignBlock("","",e,gr(e))),n.newlineUnderSectionButPair&&1!==i.length&&i.appendNewline(),n.newlineUnderSection||n[n.length-1].appendNewline(),n.newline?n.join(n.newline):n.flat()},Section:e=>{if(b(e))throw t("array can not be section, maybe you want to use it on the tables in it");return Ue(e),e},inline:e=>(Fe(e,!0),e),multiline:(()=>{const e=e=>"string"==typeof e?Cr(("\n"+e).split("\n")):b(e)?Cr(Dr(e)):(e=>(Fe(e,!1),e))(e);return e.basic=e=>(e=>{let t=e.length-1;for(Br(e,t),e[t]+=e[0]='"""';--t;)Br(e,t);return Or(e),e})("string"==typeof e?("\n"+e).split("\n"):Dr(e)),c(e),e})(),literal:(e,...t)=>{if("string"!=typeof e){let n=t.length;if(n){const{raw:i}=e;for(e=i[n];n;)t[--n]+=i[n];e=t.join("")+e}else e=e.raw[0]}const n=e.split("\n");return Or(n),n},commentFor:Vi,OffsetDateTime:ai,LocalDateTime:fi,LocalDate:bi,LocalTime:Ti,isInline:$e,isSection:ke})}));
//# sourceMappingURL=j-toml.min.js.map